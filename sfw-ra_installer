

#define MyAppName "Fallout A Soul of Fallen Worlds"
#define MyAppVersion "3.0.9"
#define MyAppPublisher "Falcon-Lair Team"
#define MyAppURL "http://falcon-lair.com/"
#define MyAppExeName "MyProg.exe"
#define NeedSize "7433"
#define TotalNeedSize "7433"
#define NeedMem 512

;#define Components

#define records

#define facompress

;#define PrecompInside
;#define SrepInside
;#define MSCInside
;#define precomp "0.42"
;#define unrar
;#define XDelta
;#define PackZIP

#define VCLStylesSkinPath "{localappdata}\VCLStylesSkin"
#define Font "a_Futurica.ttf"
#define FontName "a_Futurica"

[Setup]
AppId={{AC3B77EB-FB46-42B5-95DA-A9AB2ED929B1}
AppName=Fallout: A Soul of Fallen Worlds
AppVersion={#MyAppVersion}
;AppVerName={#MyAppName} {#MyAppVersion}
AppPublisher={#MyAppPublisher}
AppPublisherURL={#MyAppURL}
AppSupportURL={#MyAppURL}
AppUpdatesURL={#MyAppURL}
DefaultDirName={code:GetDirName}
DefaultGroupName={#MyAppName}
DisableProgramGroupPage=yes
;LicenseFile=F:\Fallout A Soul of Fallen Worlds\IntallationCreate\{tmp}\license.txt
;InfoBeforeFile=F:\Fallout A Soul of Fallen Worlds\IntallationCreate\{tmp}\pre_info.txt
;InfoAfterFile=F:\Fallout A Soul of Fallen Worlds\IntallationCreate\{tmp}\post_info.txt
OutputBaseFilename=setup
SetupIconFile=G:\Fallout A Soul of Fallen Worlds\IntallationCreate\{tmp}\sfw.ico
Compression=lzma
SolidCompression=yes
WizardImageFile={tmp}\WizardImageFile.bmp
WizardSmallImageFile={tmp}\WizardSmallBitmapImage.bmp
DirExistsWarning=no


[Languages]
Name: "russian"; MessagesFile: "compiler:Languages\Russian.isl"
//Name: english; MessagesFile: compiler:Default.isl


[CustomMessages]
russian.FreeSpace=Доступно места на диске:
russian.NeedSpace=Требуется места на диске:



//Главный компонент
russian.ComponentsName1=Установка игры;
russian.ComponentsDescription1=Основная установка.
russian.ComponentsName1_1=Fallout: A Soul of Fallen Worlds 3.0.9
russian.ComponentsDescription2=Основные файлы.
//Модули
russian.ComponentsName2=Модули;
russian.ComponentsName=

russian.ComponentsName2_1=SFW: Master / Ресурс-мастер SFW RA 1.79
russian.ComponentsName=
russian.ComponentsName2_1_1=Collision & Ragdoll Pack
russian.ComponentsName=
russian.ComponentsName2_1_2=HUD Extended
russian.ComponentsName=

russian.ComponentsName2_2=RA: Base / Игровой мастер проекта SFW RA 1.12
russian.ComponentsName=

russian.ComponentsName2_3=RA: Adventures / Модуль "Приключений" в SFW RA 1.00
russian.ComponentsName=
russian.ComponentsName2_3_1=New Vegas Bounties Extension
russian.ComponentsName=

russian.ComponentsName2_4=RA: A World of Pain / Модуль "Мир боли" в SFW RA 1.03  
russian.ComponentsName=

russian.ComponentsName2_5=RA: Creatures / Модуль существ в SFW RA 1.03
russian.ComponentsName2_5_1=More Suiciders
russian.ComponentsName2_5_2=No Supermutants-Gargantuans
russian.ComponentsName2_5_3=SLF Addon
russian.ComponentsName2_5_4=MMM RobertRaiders by Aydorn


russian.ComponentsName2_6=RA: Factions / Модуль фракций SFW RA 1.03
russian.ComponentsName2_6_1=NPCs Travel Addon

russian.ComponentsName2_7=RA: Followers / Модуль спутников в SFW RA 1.20

russian.ComponentsName2_8=RA: Gear / Модуль снаряжения в SFW RA 1.12a
russian.ComponentsName2_8_1=IMPACT Optionals
russian.ComponentsName2_8_1_1=High Quality
russian.ComponentsName2_8_1_2=Low Quality
russian.ComponentsName2_8_2=At One Two Optionals
russian.ComponentsName2_8_2_1=High Quality
russian.ComponentsName2_8_2_2=Low Quality
russian.ComponentsName2_8_3=T60P Optionals
russian.ComponentsName2_8_3_1=High Quality
russian.ComponentsName2_8_3_2=Low Quality
russian.ComponentsName2_8_4=Weapons Override DLC
russian.ComponentsName2_8_5=Weapons Override Vanilla

russian.ComponentsName2_9=RA: Interiors / Модуль интерьеров в SFW RA 1.11
russian.ComponentsName2_9_1=No AWOP Dead Money Patch

russian.ComponentsName2_10=RA: Items / Модуль предметов в SFW RA 1.14
russian.ComponentsName2_10_1=Boom to the Moon - Radio Station Music
russian.ComponentsName2_10_2=More Vending Machines
russian.ComponentsName2_10_3=Skyrocket Cafe - Radio Station Music

russian.ComponentsName2_11=RA: MoreGear / Модуль доп. снаряжения в SFW RA 1.11
russian.ComponentsName2_11_1=No Energy Shields
russian.ComponentsName2_11_2=WotM in DC

russian.ComponentsName2_12=RA: MoreQuests / Модуль доп. квестов SFW RA 1.13
russian.ComponentsName2_12_1=Corvega French Voice Acting
russian.ComponentsName2_12_2=MoreQuests Radio

russian.ComponentsName2_13=RA: Perks / Модуль способностей (перков) в SFW RA 1.16
russian.ComponentsName2_13_1=Cannibalism Extended

russian.ComponentsName2_14=RA: PlayerHomes / Модуль жилищ для ГГ в SFW RA WIP 0.67
russian.ComponentsName2_14_1=More Annex Clutter
russian.ComponentsName2_14_2=RA-Followers Module Patch

russian.ComponentsName2_15=RA: Quests / Модуль квестов SFW RA 1.09

russian.ComponentsName2_16=RA: Races / Модуль рас в SFW RA 1.02
russian.ComponentsName2_16_1=Danny Trejo Raul Patch
russian.ComponentsName2_16_2=Daughters Of A.R.E.S. Optionals
russian.ComponentsName2_16_2_1=1024 Textures
russian.ComponentsName2_16_2_2=2048 Textures
russian.ComponentsName2_16_2_3=Fleshtone Edition
russian.ComponentsName2_16_2_3_1=Normal
russian.ComponentsName2_16_2_3_2=Nude
russian.ComponentsName2_16_2_4=Matte
russian.ComponentsName2_16_2_5=Nude Body

russian.ComponentsName2_17=RA: Radio / Модуль радио в SFW RA 1.01

russian.ComponentsName2_18=RA: Redesign HD / Модуль HD-редизайна SFW RA 1.18
russian.ComponentsName2_18_1=FCO - Hair Retexture
russian.ComponentsName2_18_2=FCO Willow
russian.ComponentsName2_18_3=NVR3 Willow
russian.ComponentsName2_18_4=Gomorrah Redesigned
russian.ComponentsName2_18_5=FCO Niner
russian.ComponentsName2_18_6=Vanilla Delilah
russian.ComponentsName2_18_7=Vanilla Russel
russian.ComponentsName2_18_8=SweatEffect

russian.ComponentsName2_19=RA: SomeguySeries / Модуль работ Someguy в SFW RA 1.33

russian.ComponentsName2_20=RA: Wasteland / Модуль Пустошей в SFW RA 1.41
russian.ComponentsName2_20_1=Locations Plus Radio
russian.ComponentsName2_20_2=Nipton Rebuilt Radio
russian.ComponentsName2_20_3=Flora DC
russian.ComponentsName2_20_3_1=Flora - DC - Forested
russian.ComponentsName2_20_3_2=Flora - DC - No Flora Overhaul
russian.ComponentsName2_20_3_3=Flora - DC - Total Devastation
russian.ComponentsName2_20_4=Flora - NV - Fertile Wasteland
russian.ComponentsName2_20_5=UCO - FOBs
russian.ComponentsName2_20_6=UCO - More Enemies

russian.ComponentsName2_21=RA: Worlds / Модуль новых территорий в SFW RA 0.99

russian.ComponentsName3=Другие дополнения
russian.ComponentsName3_1=RA: Advanced Recon / Улучшенное снаряжение разведки для SFW RA 1.0
russian.ComponentsName3_1_1=HUD Addition
russian.ComponentsName3_2=RA: "Альтон, штат Иллинойс" / Alton IL - Huge World for SFW RA 2.0.3 U5
russian.ComponentsName3_3=RA: "Остров - Северная территория" 1.2 U4
russian.ComponentsName3_4=RA: "В поисках Небес", Комбо-издание / A Quest for Heaven - Combo Edition 1.4a
russian.ComponentsName3_5=RA: "Под Куполом Боулдера" / Beyond Boulder Dome 1.2 U5
russian.ComponentsName3_6=RA: "Команда корабля Дзета" / Mothership Zeta Crew для SFW RA 1.66 RA-Ed. U7

//Компоненты для оптимизации
russian.ComponentsName4=Дополнительные компоненты
russian.ComponentsName4_1=Fallout New Vegas 4GB Updated v2.0
russian.ComponentsName4_2=New Vegas Script Extender (NVSE) v5.1b4
russian.ComponentsName4_2_1=Оптимизация игры
russian.ComponentsName4_2_1_1=NVSR или NVTF
russian.ComponentsName4_2_1_1_1=NVTF - New Vegas Tick Fix v.3.8.5
russian.ComponentsName4_2_1_1_2=NVSR - New Vegas Stutter Remover v.4.1.36
russian.ComponentsName4_2_1_2=NVAC - New Vegas Anti Crash v.7.5.1.0
russian.ComponentsName4_2_1_3=OneTweak v2.1.0.2
russian.ComponentsName4_2_1_4=Ogg Vorbis Libraries v.4
russian.ComponentsName4_2_2=Геймплейные скриптовые расширения
russian.ComponentsName4_2_2_1=JohnnyGuitar NVSE v.2.55
russian.ComponentsName4_2_2_2=JIP LN NVSE v.55.35
russian.ComponentsName4_2_2_2_1=lStewieAl's Tweaks v.4.31
russian.ComponentsName4_2_2_2_1_1=Настройки от Axonis
russian.ComponentsName4_2_2_2_2=Unnecessary Tweaks v.1.2
russian.ComponentsName4_2_2_2_2_1=Настройки от Axonis
russian.ComponentsName4_2_2_2_3=UIO - User Interface Organizer v.2.09
russian.ComponentsName4_2_2_2_3_1=MCM - The Mod Configuration Menu v.1.50 fix2
russian.ComponentsName4_3=Улучшение графики
russian.ComponentsName4_3_1=ENB - v.0.405
russian.ComponentsName4_3_2=NVGE - New Vegas Reloaded v.1.3.0


russian.ComponentsInfoPanel1=Описание
russian.ComponentsInfoPanel2=Наведите курсор мыши на компонент, чтобы прочитать его описание.

russian.ComponentsDescription3=Дополнительные компоненты для оптимизации игры.
russian.ComponentsDescription4=Позволяет игре использовать 4ГБ оперативной памяти.
russian.ComponentsDescription5=Более широкое использование возможностей скриптовой системы игры.
russian.ComponentsDescription6=Плагин, предназначенный для оптимизации игры.
russian.ComponentsDescription7=Плагин, сокращающий вылеты из игры.
russian.ComponentsDescription8=Псевдооконный режим. Предназначен для оптимизации игры.
russian.ComponentsDescription9=Скриптовый расширитель, в т.ч. исправляющий ошибки движка.
russian.ComponentsDescription10=Модуль, позволяющий более широко использовать возможности видеокарты.
russian.ComponentsDescription11=Injector Version.
russian.ComponentsDescription12=Wrapper Version.

ChooseDirInfo=
ChooseDir=Выберите директорию для копирования.
ChooseDirPrompt=Выберите директорию для копирования.
InvalidDir1=Неправильно указана директория для копирования файлов.%nХотите продолжить?
InvalidDir2=Отсутствуют необходимые файлы в выбранной директории.%nХотите продолжить?
ProgressCopy=Скопировано %s из %s
ProgressTotal=Общий прогресс: %.2f %%
StatusCopy=Копирование файлов...
StatusRename=Обновление имен файлов...
StatusExtract=Извлечение файлов...
btnBrowse=Обзор...
BtnCancel=Отмена
InstallFailed=Произошла ошибка во время установки.

[Tasks]
Name: plugins_autosort; Description: "Автосортировка плагинов."; Flags:


[Types]
Name: full; Description: "Полная установка";
Name: "custom"; Description: "Выборочная установка"; Flags: iscustom

[Components]
//Главный компонент
Name: "general"; Description: {cm:ComponentsName1}; Types: full custom; Flags: checkablealone
Name: "general\full"; Description: {cm:ComponentsName1_1}; Types: full custom; ExtraDiskSpaceRequired: 7997257597
//Модули
Name: modules; Description: {cm:ComponentsName2}; Types: full;

Name: modules\Master; Description: {cm:ComponentsName2_1}; Types: full custom; Flags: checkablealone ; ExtraDiskSpaceRequired: 3789365248
Name: modules\Master\CollisionRagdollPack; Description: {cm:ComponentsName2_1_1}; Flags:dontinheritcheck;  ExtraDiskSpaceRequired: 22675456
Name: modules\Master\HUDAddition; Description: {cm:ComponentsName2_1_2}; Flags:dontinheritcheck; ExtraDiskSpaceRequired:  111

Name: modules\Base; Description: {cm:ComponentsName2_2}; Types: full; ExtraDiskSpaceRequired: 63631360

Name: modules\Adventures; Description: {cm:ComponentsName2_3}; Types: full custom; Flags: checkablealone; ExtraDiskSpaceRequired: 1281007616
Name: modules\Adventures\NVBounties_Extension; Description: {cm:ComponentsName2_3_1}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 442368

Name: modules\AWOP; Description: {cm:ComponentsName2_4}; Types: full; ExtraDiskSpaceRequired: 19992576

Name: modules\Creatures; Description: {cm:ComponentsName2_5}; Types: full custom; Flags: checkablealone; ExtraDiskSpaceRequired: 998658048
Name: modules\Creatures\More_Suiciders; Description: {cm:ComponentsName2_5_1}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 12288
Name: modules\Creatures\No_SupermutantsGargantuans; Description: {cm:ComponentsName2_5_2}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 342
Name: modules\Creatures\SLF_Addon; Description: {cm:ComponentsName2_5_3}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 4096
Name: modules\Creatures\MMM_RobertRaiders_by_Aydorn; Description: {cm:ComponentsName2_5_4}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 13991936


Name: modules\Factions; Description: {cm:ComponentsName2_6}; Types: full custom; Flags: checkablealone; ExtraDiskSpaceRequired: 321847296
Name: modules\Factions\NPCs_Travel_Addon; Description: {cm:ComponentsName2_6_1}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 589824

Name: modules\Followers; Description: {cm:ComponentsName2_7}; Types: full custom; Flags: checkablealone; ExtraDiskSpaceRequired: 3396984832

Name: modules\Gear; Description: {cm:ComponentsName2_8}; Types: full custom; Flags: checkablealone; ExtraDiskSpaceRequired: 4127109120
Name: modules\Gear\IMPACT_Optionals; Description: {cm:ComponentsName2_8_1}; Flags:dontinheritcheck;
Name: modules\Gear\IMPACT\TheBasementDweller; Description: {cm:ComponentsName2_8_1_1}; Flags: exclusive; ExtraDiskSpaceRequired: 8036352
Name: modules\Gear\IMPACT\TheMichaelBay; Description: {cm:ComponentsName2_8_1_2}; Flags: exclusive; ExtraDiskSpaceRequired: 37838848
Name: modules\Gear\AtOneTwo_Optionals; Description: {cm:ComponentsName2_8_2}; Flags:dontinheritcheck;
Name: modules\Gear\AtOneTwo\HQ; Description: {cm:ComponentsName2_8_2_1}; Flags: exclusive; ExtraDiskSpaceRequired: 188305408
Name: modules\Gear\AtOneTwo\LQ; Description: {cm:ComponentsName2_8_2_2}; Flags: exclusive; ExtraDiskSpaceRequired: 21716992
Name: modules\Gear\T60P_Optionals; Description: {cm:ComponentsName2_8_3}; Flags:dontinheritcheck;
Name: modules\Gear\T60P\HQ; Description: {cm:ComponentsName2_8_3_1}; Flags: exclusive; ExtraDiskSpaceRequired: 671129600
Name: modules\Gear\T60P\LQ; Description: {cm:ComponentsName2_8_3_2}; Flags: exclusive; ExtraDiskSpaceRequired: 41971712
Name: modules\Gear\WeaponsOverride_DLC; Description: {cm:ComponentsName2_8_4}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 154660864
Name: modules\Gear\WeaponsOverride_Vanilla; Description: {cm:ComponentsName2_8_5}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 418390016

Name: modules\Interiors; Description: {cm:ComponentsName2_9}; Types: full custom; Flags: checkablealone; ExtraDiskSpaceRequired: 345178112
Name: modules\Interiors\No_AWOP4DeadMoney; Description: {cm:ComponentsName2_9_1}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 135168

Name: modules\Items; Description: {cm:ComponentsName2_10}; Types: full custom; Flags: checkablealone; ExtraDiskSpaceRequired: 1812828160
Name: modules\Items\Boom_to_the_Moon_Radio_Station_Music; Description: {cm:ComponentsName2_10_1}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 326561792
Name: modules\Items\More_VendingMachines; Description: {cm:ComponentsName2_10_2}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 8192
Name: modules\Items\Skyrocket_Cafe_Radio_Station_Music; Description: {cm:ComponentsName2_10_3}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 175411200

Name: modules\MoreGear; Description: {cm:ComponentsName2_11}; Types: full custom; Flags: checkablealone; ExtraDiskSpaceRequired: 15399559168
Name: modules\MoreGear\NoEnergyShields; Description: {cm:ComponentsName2_11_1}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 32768
Name: modules\MoreGear\WotM_in_DC; Description: {cm:ComponentsName2_11_2}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 32768

Name: modules\MoreQuests; Description: {cm:ComponentsName2_12}; Types: full custom; Flags: checkablealone; ExtraDiskSpaceRequired: 4038516736
Name: modules\MoreQuests\Corvega_FrenchVoiceActing; Description: {cm:ComponentsName2_12_1}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 318423040
Name: modules\MoreQuests\MoreQuests_Radio; Description: {cm:ComponentsName2_12_2}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 232693760

Name: modules\Perks; Description: {cm:ComponentsName2_13}; Types: full custom; Flags: checkablealone; ExtraDiskSpaceRequired: 121356288
Name: modules\Perks\CannibalismExtended; Description: {cm:ComponentsName2_13_1}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 196608

Name: modules\PlayerHomes; Description: {cm:ComponentsName2_14}; Types: full custom; Flags: checkablealone; ExtraDiskSpaceRequired: 1450962944
Name: modules\PlayerHomes\MoreAnnexClutter; Description: {cm:ComponentsName2_14_1}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 24576
Name: modules\PlayerHomes\Followers_Module; Description: {cm:ComponentsName2_14_2}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 180224

Name: modules\Quests; Description: {cm:ComponentsName2_15}; Types: full custom; Flags: checkablealone; ExtraDiskSpaceRequired: 5073727488

Name: modules\Races; Description: {cm:ComponentsName2_16}; Types: full custom; Flags: checkablealone; ExtraDiskSpaceRequired: 1392492544
Name: modules\Races\DannyTrejoRaul; Description: {cm:ComponentsName2_16_1}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 4096
Name: modules\Races\DaughtersOfARES_Optionals; Description: {cm:ComponentsName2_16_2}; Flags:dontinheritcheck
Name: modules\Races\DaughtersOfARES_Optionals\1024; Description: {cm:ComponentsName2_16_2_1}; Flags: exclusive; ExtraDiskSpaceRequired: 12759040
Name: modules\Races\DaughtersOfARES_Optionals\2048; Description: {cm:ComponentsName2_16_2_2}; Flags: exclusive; ExtraDiskSpaceRequired: 44208128
Name: modules\Races\DaughtersOfARES_Optionals\Fleshtone_Edition; Description: {cm:ComponentsName2_16_2_3}; Flags: exclusive
Name: modules\Races\DaughtersOfARES_Optionals\Fleshtone_Edition\Normal_Textures; Description: {cm:ComponentsName2_16_2_3_1}; Flags: exclusive; ExtraDiskSpaceRequired: 24268800
Name: modules\Races\DaughtersOfARES_Optionals\Fleshtone_Edition\Nude_Textures; Description: {cm:ComponentsName2_16_2_3_2}; Flags: exclusive; ExtraDiskSpaceRequired: 29884416
Name: modules\Races\DaughtersOfARES_Optionals\Matte; Description: {cm:ComponentsName2_16_2_4}; Flags: exclusive; ExtraDiskSpaceRequired: 495616
Name: modules\Races\DaughtersOfARES_Optionals\Nude_Body; Description: {cm:ComponentsName2_16_2_5}; Flags: exclusive; ExtraDiskSpaceRequired: 32931840

Name: modules\Radio; Description: {cm:ComponentsName2_17}; Types: full; ExtraDiskSpaceRequired: 751947776

Name: modules\RedesignHD; Description: {cm:ComponentsName2_18}; Types: full custom; Flags: checkablealone; ExtraDiskSpaceRequired: 1749196800
Name: modules\RedesignHD\FCO_HairRetexture; Description: {cm:ComponentsName2_18_1}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 104173568
Name: modules\RedesignHD\FCO_Willow; Description: {cm:ComponentsName2_18_2}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 20598784
Name: modules\RedesignHD\NVR3_Willow; Description: {cm:ComponentsName2_18_3}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 9080832
Name: modules\RedesignHD\Gomorrah_Redesigned; Description: {cm:ComponentsName2_18_4}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 65536
Name: modules\RedesignHD\FCO_Niner; Description: {cm:ComponentsName2_18_5}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 8192
Name: modules\RedesignHD\Vanilla_Delilah; Description: {cm:ComponentsName2_18_6}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 8192
Name: modules\RedesignHD\Vanilla_Russel; Description: {cm:ComponentsName2_18_7}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 4096
Name: modules\RedesignHD\SweatEffect; Description: {cm:ComponentsName2_18_8}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 970752

Name: modules\SomeguySeries; Description: {cm:ComponentsName2_19}; Types: full custom; Flags: checkablealone; ExtraDiskSpaceRequired: 1237426176

Name: modules\Wasteland; Description: {cm:ComponentsName2_20}; Types: full custom; Flags: checkablealone; ExtraDiskSpaceRequired: 2121928704
Name: modules\Wasteland\LocationsPlusRadio; Description: {cm:ComponentsName2_20_1}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 313159680
Name: modules\Wasteland\NiptonRebuiltRadio; Description: {cm:ComponentsName2_20_2}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 657027072
Name: modules\Wasteland\Flora_DC; Description: {cm:ComponentsName2_20_3}; Flags:dontinheritcheck;
Name: modules\Wasteland\Flora_DC\Flora_DC_Forested; Description: {cm:ComponentsName2_20_3_1}; Flags: exclusive; ExtraDiskSpaceRequired: 108359680
Name: modules\Wasteland\Flora_DC\Flora_DC_NoFloraOverhaul; Description: {cm:ComponentsName2_20_3_2}; Flags: exclusive; ExtraDiskSpaceRequired: 4096
Name: modules\Wasteland\Flora_DC\Flora_DC_TotalDevastation; Description: {cm:ComponentsName2_20_3_3}; Flags: exclusive; ExtraDiskSpaceRequired: 15941632
Name: modules\Wasteland\Flora_NV_FertileWasteland; Description: {cm:ComponentsName2_20_4}; Flags: dontinheritcheck; ExtraDiskSpaceRequired: 3235840
Name: modules\Wasteland\UCO_FOBs; Description: {cm:ComponentsName2_20_5}; Flags: dontinheritcheck; ExtraDiskSpaceRequired: 20480
Name: modules\Wasteland\UCO_MoreEnemies; Description: {cm:ComponentsName2_20_6}; Flags: dontinheritcheck; ExtraDiskSpaceRequired: 4096



Name: modules\Worlds; Description: {cm:ComponentsName2_21}; Types: full custom; ExtraDiskSpaceRequired: 890957824

Name: global_addons; Description: {cm:ComponentsName3}; Types: full;
Name: global_addons\AdvancedRecon; Description: {cm:ComponentsName3_1}; Types: full custom; Flags: checkablealone; ExtraDiskSpaceRequired: 94535680
Name: global_addons\AdvancedRecon\SFW_Master_HUDAddition; Description: {cm:ComponentsName3_1_1}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 135168
Name: global_addons\Alton; Description: {cm:ComponentsName3_2}; Types: full custom; Flags: checkablealone; ExtraDiskSpaceRequired: 674922496
Name: global_addons\AmQuest; Description: {cm:ComponentsName3_3}; Types: full custom; Flags: checkablealone; ExtraDiskSpaceRequired: 947544064
Name: global_addons\AQFH; Description: {cm:ComponentsName3_4}; Types: full custom; Flags: checkablealone; ExtraDiskSpaceRequired: 1436205056
Name: global_addons\DomeCity; Description: {cm:ComponentsName3_5}; Types: full custom; Flags: checkablealone; ExtraDiskSpaceRequired: 927162368
Name: global_addons\MothershipCrew; Description: {cm:ComponentsName3_6}; Types: full custom; Flags: checkablealone; ExtraDiskSpaceRequired: 1416445952




//Аддоны

//Игровые компоненты



//Компоненты для оптимизации
Name: custom; Description: {cm:ComponentsName4}; Types: full;
Name: custom\fnv4gb; Description: {cm:ComponentsName4_1}; Types: full; ExtraDiskSpaceRequired: 288754
Name: custom\nvse; Description: {cm:ComponentsName4_2}; Types: full; ExtraDiskSpaceRequired: 6179904
Name: custom\nvse\opt; Description: {cm:ComponentsName4_2_1}; Types: full;
Name: custom\nvse\opt\nvsr_or_nvtf; Description: {cm:ComponentsName4_2_1_1}; Types: full;
Name: custom\nvse\opt\nvsr_or_nvtf\nvtf; Description: {cm:ComponentsName4_2_1_1_1}; Flags: exclusive; ExtraDiskSpaceRequired: 1145904
Name: custom\nvse\opt\nvsr_or_nvtf\nvsr; Description: {cm:ComponentsName4_2_1_1_2}; Flags: exclusive; ExtraDiskSpaceRequired: 131072
Name: custom\nvse\opt\nvac; Description: {cm:ComponentsName4_2_1_2}; Types: full; ExtraDiskSpaceRequired: 151402
Name: custom\nvse\opt\onetweak; Description: {cm:ComponentsName4_2_1_3}; Types: full; ExtraDiskSpaceRequired: 217088
Name: custom\nvse\opt\ogg; Description: {cm:ComponentsName4_2_1_4}; Types: full; ExtraDiskSpaceRequired: 913408
Name: custom\nvse\se; Description: {cm:ComponentsName4_2_2}; Types: full;
Name: custom\nvse\se\jg; Description: {cm:ComponentsName4_2_2_1}; Types: full; ExtraDiskSpaceRequired: 278528
Name: custom\nvse\se\jipln; Description: {cm:ComponentsName4_2_2_2}; Types: full; ExtraDiskSpaceRequired: 512000
Name: custom\nvse\se\jipln\istewieal; Description: {cm:ComponentsName4_2_2_2_1}; Types: full; ExtraDiskSpaceRequired: 430080
Name: custom\nvse\se\jipln\istewieal\config_axonis; Description: {cm:ComponentsName4_2_2_2_1_1}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 57344
Name: custom\nvse\se\jipln\untweak; Description: {cm:ComponentsName4_2_2_2_2}; Types: full; ExtraDiskSpaceRequired: 143360
Name: custom\nvse\se\jipln\untweak\config_axonis; Description: {cm:ComponentsName4_2_2_2_2_1}; Flags:dontinheritcheck; ExtraDiskSpaceRequired: 4096
Name: custom\nvse\se\jipln\uio; Description: {cm:ComponentsName4_2_2_2_3}; Types: full; ExtraDiskSpaceRequired: 28672
Name: custom\nvse\se\jipln\uio\mcm; Description: {cm:ComponentsName4_2_2_2_3_1}; Types: full; ExtraDiskSpaceRequired: 811008
Name: custom\ge; Description: {cm:ComponentsName4_3}; Flags:dontinheritcheck
Name: custom\ge\enbboost; Description: {cm:ComponentsName4_3_1}; Flags: exclusive; ExtraDiskSpaceRequired: 1157366
Name: custom\ge\nvge; Description: {cm:ComponentsName4_3_2}; Flags: exclusive; ExtraDiskSpaceRequired: 128532480


[Icons]
Name: {commondesktop}\Fallout - A Soul of Fallen Worlds; Filename: {app}\fnv4gb.exe; WorkingDir: {app}; 

[Files]
Source: {tmp}\antidecompilation.exe;  DestDir: "{tmp}";
//Модули, библиотеки и прекомпиляторы--
Source: {tmp}\VclStylesinno.dll; DestDir: {app}; Flags: dontcopy 
Source: {tmp}\Auric.vsf; DestDir: {app}; Flags: dontcopy 
Source: {tmp}\VclStylesinno.dll; DestDir: {#VCLStylesSkinPath}; Flags: uninsneveruninstall 
Source: {tmp}\Auric.vsf; DestDir: {#VCLStylesSkinPath}; Flags: uninsneveruninstall 
Source: a_Futurica.ttf; DestDir: {tmp}\; Flags: dontcopy 
Source: {tmp}\descctrl.dll; DestDir: {app}; Flags: dontcopy 
Source: ISCopyFile.dll; Flags: dontcopy 
Source: Include\English.ini; DestDir: {tmp}; Flags: dontcopy 
Source: Include\unarc.dll; DestDir: {tmp}; Flags: dontcopy 
Source: ISDone.dll; DestDir: {tmp}; Flags: dontcopy 
#ifdef records
Source: records.inf; DestDir: {tmp}; Flags: dontcopy 
#endif

#ifdef PrecompInside
Source: Include\CLS-precomp.dll; DestDir: {tmp}; Flags: dontcopy 
Source: Include\packjpg_dll.dll; DestDir: {tmp}; Flags: dontcopy 
Source: Include\packjpg_dll1.dll; DestDir: {tmp}; Flags: dontcopy 
Source: Include\precomp.exe; DestDir: {tmp}; Flags: dontcopy 
Source: Include\zlib1.dll; DestDir: {tmp}; Flags: dontcopy 
#endif
#ifdef SrepInside
Source: Include\CLS-srep.dll; DestDir: {tmp}; Flags: dontcopy 
#endif
#ifdef MSCInside
Source: Include\CLS-MSC.dll; DestDir: {tmp}; Flags: dontcopy 
#endif
#ifdef facompress
Source: Include\facompress.dll; DestDir: {tmp}; Flags: dontcopy 
#endif
#ifdef precomp
  #if precomp == "0.38"
  Source: Include\precomp038.exe; DestDir: {tmp}; Flags: dontcopy 
  #else
    #if precomp == "0.4"
    Source: Include\precomp040.exe; DestDir: {tmp}; Flags: dontcopy 
    #else
      #if precomp == "0.41"
      Source: Include\precomp041.exe; DestDir: {tmp}; Flags: dontcopy 
      #else
        #if precomp == "0.42"
        Source: Include\precomp042.exe; DestDir: {tmp}; Flags: dontcopy 
        #else
        Source: Include\precomp038.exe; DestDir: {tmp}; Flags: dontcopy 
        Source: Include\precomp040.exe; DestDir: {tmp}; Flags: dontcopy 
        Source: Include\precomp041.exe; DestDir: {tmp}; Flags: dontcopy 
        Source: Include\precomp042.exe; DestDir: {tmp}; Flags: dontcopy 
        #endif
      #endif
    #endif
  #endif
#endif
#ifdef unrar
Source: Include\Unrar.dll; DestDir: {tmp}; Flags: dontcopy 
#endif
#ifdef XDelta
Source: Include\XDelta3.dll; DestDir: {tmp}; Flags: dontcopy 
#endif
#ifdef PackZIP
Source: Include\7z.dll; DestDir: {tmp}; Flags: dontcopy 
Source: Include\packZIP.exe; DestDir: {tmp}; Flags: dontcopy 
#endif


//Основные файлы
Source: "C:\_FalloutBackup\IntallationCreate\{app}\plugins.txt"; DestDir: "{app}"; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{src}\plugins.txt"; DestDir: "{localappdata}\FalloutNV"; Tasks: plugins_autosort; Flags: ignoreversion
;Source: "D:\Games\Bethesda Softworks\Fallout 3\Data\BrokenSteel - Main.bsa"; DestDir: "{app}"; Flags: ignoreversion
;Source: {win}\help\*; DestDir: {app}\Files; Flags: external recursesubdirs

//Модули
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\master\SFW-Master-HUDAddition\*"; DestDir: "{app}\Data\"; Components: modules\Master\HUDAddition; Flags: ignoreversion recursesubdirs createallsubdirs

Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\adventures\RA-Adventures Patch - NVBounties_Extension\*"; DestDir: "{app}\Data\"; Components: modules\Adventures\NVBounties_Extension; Flags: ignoreversion recursesubdirs createallsubdirs


Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\creatures\RA-Creatures Patch - More Suiciders\*"; DestDir: "{app}\Data\"; Components: modules\Creatures\More_Suiciders; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\creatures\RA-Creatures Patch - No Supermutants-Gargantuans\*"; DestDir: "{app}\Data\"; Components: modules\Creatures\No_SupermutantsGargantuans; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\creatures\RA-Creatures Patch - SLF-Addon\*"; DestDir: "{app}\Data\"; Components: modules\Creatures\SLF_Addon; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\creatures\RA-Creatures-Patch - MMM-RobertRaiders_by_Aydorn\*"; DestDir: "{app}\Data\"; Components: modules\Creatures\MMM_RobertRaiders_by_Aydorn; Flags: ignoreversion recursesubdirs createallsubdirs

Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\factions\RA-Factions_Plugin - NPCs Travel Addon\*"; DestDir: "{app}\Data\"; Components: modules\Factions\NPCs_Travel_Addon; Flags: ignoreversion recursesubdirs createallsubdirs

Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\interiors\RA-Interiors Patch v1.03 - No AWOP4DeadMoney\*"; DestDir: "{app}\Data\"; Components: modules\Interiors\No_AWOP4DeadMoney; Flags: ignoreversion recursesubdirs createallsubdirs

Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\items\RA-Items Patch - More VendingMachines\*"; DestDir: "{app}\Data\"; Components: modules\Items\More_VendingMachines; Flags: ignoreversion recursesubdirs createallsubdirs

Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\moregear\RA-MoreGear Patch - NoEnergyShields\*"; DestDir: "{app}\Data\"; Components: modules\MoreGear\NoEnergyShields; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\moregear\RA-MoreGear Patch - WotM in DC\*"; DestDir: "{app}\Data\"; Components: modules\MoreGear\WotM_in_DC; Flags: ignoreversion recursesubdirs createallsubdirs

Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\perks\RA-Perks_Plugin - CannibalismExtended\*"; DestDir: "{app}\Data\"; Components: modules\Perks\CannibalismExtended; Flags: ignoreversion recursesubdirs createallsubdirs

Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\playerhomes\RA-PlayerHomes Addon - MoreAnnexClutter\*"; DestDir: "{app}\Data\"; Components: modules\PlayerHomes\MoreAnnexClutter; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\playerhomes\RA-PlayerHomes Patch - RA-Followers Module\*"; DestDir: "{app}\Data\"; Components: modules\PlayerHomes\Followers_Module; Flags: ignoreversion recursesubdirs createallsubdirs

Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\races\RA-Races Patch - DannyTrejoRaul\*"; DestDir: "{app}\Data\"; Components: modules\Races\DannyTrejoRaul; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\races\RA-Races-DaughtersOfARES_Optionals\1024\*"; DestDir: "{app}\Data\"; Components: modules\Races\DaughtersOfARES_Optionals\1024; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\races\RA-Races-DaughtersOfARES_Optionals\2048\*"; DestDir: "{app}\Data\"; Components: modules\Races\DaughtersOfARES_Optionals\2048; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\races\RA-Races-DaughtersOfARES_Optionals\Fleshtone_Edition\Normal\*"; DestDir: "{app}\Data\"; Components: modules\Races\DaughtersOfARES_Optionals\Fleshtone_Edition\Normal_Textures; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\races\RA-Races-DaughtersOfARES_Optionals\Fleshtone_Edition\Nude\*"; DestDir: "{app}\Data\"; Components: modules\Races\DaughtersOfARES_Optionals\Fleshtone_Edition\Nude_Textures; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\races\RA-Races-DaughtersOfARES_Optionals\Matte\*"; DestDir: "{app}\Data\"; Components: modules\Races\DaughtersOfARES_Optionals\Matte; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\races\RA-Races-DaughtersOfARES_Optionals\Nude Body\*"; DestDir: "{app}\Data\"; Components: modules\Races\DaughtersOfARES_Optionals\Nude_Body; Flags: ignoreversion recursesubdirs createallsubdirs

Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\redesignhd\RA-RedesignHD - FCO Willow\*"; DestDir: "{app}\Data\"; Components: modules\RedesignHD\FCO_Willow; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\redesignhd\RA-RedesignHD - NVR3 Willow\*"; DestDir: "{app}\Data\"; Components: modules\RedesignHD\NVR3_Willow; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\redesignhd\RA-RedesignHD Addon - Gomorrah Redesigned v2\*"; DestDir: "{app}\Data\"; Components: modules\RedesignHD\Gomorrah_Redesigned; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\redesignhd\RA-RedesignHD Patch - FCO Niner\*"; DestDir: "{app}\Data\"; Components: modules\RedesignHD\FCO_Niner; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\redesignhd\RA-RedesignHD Patch - Vanilla Delilah\*"; DestDir: "{app}\Data\"; Components: modules\RedesignHD\Vanilla_Delilah; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\redesignhd\RA-RedesignHD Patch - Vanilla Russel\*"; DestDir: "{app}\Data\"; Components: modules\RedesignHD\Vanilla_Russel; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\redesignhd\RA-RedesignHD Addon - SweatEffect\*"; DestDir: "{app}\Data\"; Components: modules\RedesignHD\SweatEffect; Flags: ignoreversion recursesubdirs createallsubdirs



Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\wasteland\RA-Wasteland - Flora - DC - NoFloraOverhaul\*"; DestDir: "{app}\Data\"; Components: modules\Wasteland\Flora_DC\Flora_DC_NoFloraOverhaul; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\wasteland\RA-Wasteland - Flora - DC - TotalDevastation\*"; DestDir: "{app}\Data\"; Components: modules\Wasteland\Flora_DC\Flora_DC_TotalDevastation; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\wasteland\RA-Wasteland-Flora-NV-FertileWasteland\*"; DestDir: "{app}\Data\"; Components: modules\Wasteland\Flora_NV_FertileWasteland; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\wasteland\RA-Wasteland - UCO-FOBs\*"; DestDir: "{app}\Data\"; Components: modules\Wasteland\UCO_FOBs; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\Modules\wasteland\RA-Wasteland - UCO-MoreEnemies\*"; DestDir: "{app}\Data\"; Components: modules\Wasteland\UCO_MoreEnemies; Flags: ignoreversion recursesubdirs createallsubdirs

///Source: "\*"; DestDir: "{app}\Data\"; Components: ; Flags: ignoreversion recursesubdirs createallsubdirs

Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\gl_addons\adv_recon\RA-AdvancedRecon_v1.0\*"; DestDir: "{app}\Data\"; Components: global_addons\AdvancedRecon; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\gl_addons\adv_recon\SFW-Master-HUDAddition\*"; DestDir: "{app}\Data\"; Components: global_addons\AdvancedRecon\SFW_Master_HUDAddition; Flags: ignoreversion recursesubdirs createallsubdirs


//Компоненты
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\fnv4gb\*"; DestDir: "{app}"; Components: custom\fnv4gb; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\nvse\*"; DestDir: "{app}"; Components: custom\nvse; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\nvse_addon\nvac\*"; DestDir: "{app}\Data\NVSE\"; Components: custom\nvse\opt\nvac; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\nvse_addon\nvsr\*"; DestDir: "{app}"; Components: custom\nvse\opt\nvsr_or_nvtf\nvsr; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\nvse_addon\onetweak\*"; DestDir: "{app}\Data\NVSE\"; Components: custom\nvse\opt\onetweak; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\enbboost\*"; DestDir: "{app}"; Components: custom\ge\enbboost; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\nvse_addon\nvtf\*"; DestDir: "{app}\Data\"; Components: custom\nvse\opt\nvsr_or_nvtf\nvtf; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\nvse_addon\johnnyguitar\*"; DestDir: "{app}\Data\"; Components: custom\nvse\se\jg; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\nvse_addon\jipln\*"; DestDir: "{app}\Data\"; Components: custom\nvse\se\jipln; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\nvse_addon\istewieal\*"; DestDir: "{app}\Data\"; Components: custom\nvse\se\jipln\untweak; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\nvse_addon\isteawieal_axonis\*"; DestDir: "{app}\Data\"; Components: custom\nvse\se\jipln\istewieal\config_axonis; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\nvse_addon\untweaks\*"; DestDir: "{app}\Data\"; Components: custom\nvse\se\jipln\untweak; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\nvse_addon\untweaks_axonis\*"; DestDir: "{app}\Data\"; Components: custom\nvse\se\jipln\untweak\config_axonis; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\nvse_addon\uio\*"; DestDir: "{app}\Data\"; Components: custom\nvse\se\jipln\uio; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\nvse_addon\mcm\*"; DestDir: "{app}\Data\"; Components: custom\nvse\se\jipln\uio\mcm; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\nvse_addon\nvge\*"; DestDir: "{app}"; Components: custom\ge\nvge; Flags: ignoreversion recursesubdirs createallsubdirs
Source: "C:\_FalloutBackup\IntallationCreate\{app}\Customs\ogg\*"; DestDir: "{app}"; Components: custom\nvse\opt\ogg; Flags: ignoreversion recursesubdirs createallsubdirs


[UninstallDelete]
Name: {app}; Type: filesandordirs


[Run]
;Filename: "{app}\pororo.exe"; Description: "{cm:LaunchProgram,{#StringChange(MyAppName, '&', '&&')}}"; Flags: nowait postinstall skipifsilent

[INI]
Filename: {userdocs}\My games\FalloutNV\Fallout.ini; Section: General; Key: SCharGenQuest; String: 0001F388
Filename: {userdocs}\My games\FalloutNV\Fallout.ini; Section: General; Key: SCharGenQuest; String: 0001F388
Filename: {app}\Fallout_default.ini; Section: General; Key: SCharGenQuest; String: 0001F388
Filename: {userdocs}\My games\FalloutNV\Fallout.ini; Section: Archive; Key: SArchiveList; String: Fallout - Voices1.bsa, Fallout - Textures.bsa, Fallout - Textures2.bsa, Fallout - Meshes.bsa, Fallout - Sound.bsa, Fallout - Misc.bsa, Fallout - MenuVoices.bsa, Fallout - Voices.bsa
Filename: {userdocs}\My games\FalloutNV\Fallout.ini; Section: Archive; Key: SArchiveList; String: Fallout - Voices1.bsa, Fallout - Textures.bsa, Fallout - Textures2.bsa, Fallout - Meshes.bsa, Fallout - Sound.bsa, Fallout - Misc.bsa, Fallout - MenuVoices.bsa, Fallout - Voices.bsa
Filename: {app}\Fallout_default.ini; Section: Archive; Key: SArchiveList; String: Fallout - Voices1.bsa, Fallout - Textures.bsa, Fallout - Textures2.bsa, Fallout - Meshes.bsa, Fallout - Sound.bsa, Fallout - Misc.bsa, Fallout - MenuVoices.bsa, Fallout - Voices.bsa
Filename: {userdocs}\My games\FalloutNV\Fallout.ini; Section: Archive; Key: bInvalidateOlderFiles; String: 1
Filename: {userdocs}\My games\FalloutNV\Fallout.ini; Section: Archive; Key: bInvalidateOlderFiles; String: 1
Filename: {app}\Fallout_default.ini; Section: Archive; Key: bInvalidateOlderFiles; String: 1
Filename: {userdocs}\My games\FalloutNV\Fallout.ini; Section: Archive; Key: bUseArchives; String: 1
Filename: {userdocs}\My games\FalloutNV\Fallout.ini; Section: Archive; Key: bUseArchives; String: 1
Filename: {app}\Fallout_default.ini; Section: Archive; Key: bUseArchives; String: 1
Filename: {userdocs}\My games\FalloutNV\Fallout.ini; Section: General; Key: bLoadFaceGenHeadEGTFiles; String: 1
Filename: {userdocs}\My games\FalloutNV\Fallout.ini; Section: General; Key: bLoadFaceGenHeadEGTFiles; String: 1
Filename: {app}\Fallout_default.ini; Section: General; Key: bLoadFaceGenHeadEGTFiles; String: 1


[Code]
//ISDone + Копиование файлов

type
  TISDoneCallback = function (OveralPct,CurrentPct: integer;CurrentFile,TimeStr1,TimeStr2,TimeStr3:PAnsiChar): longword;

const
  SS_DUMMY    = 1;
  SS_ISDONE   = 2;
  SS_COPY     = 3;
  SS_RENAME   = 4;
  SS_OTHER    = 5;

  PCFonFLY    = true;
  notPCFonFLY = false;
var
  CopyDirEdit: TEdit;
  CopyDirBrowse: TButton;
  ErrorCode, InstallCancel: Boolean;
  InstallState: Integer;
  pctBase, pctVal: Extended;
  pctPB1, pctPB2: TNewProgressBar;
  pctInfo1, pctInfo2: Tlabel;
  PBOldProc: Longint;
  CancelBtn: TButton;
  PCFVer: Double;

function isCopyFile(callback: Longword; PathOut, PathIn: String; bInnerFolders: bool): integer; external 'isCopyFile@files:ISCopyFile.dll stdcall';
procedure BreakCopy(); external 'BreakCopy@files:ISCopyFile.dll stdcall';

function SetWindowLong(hWnd: HWND; nIndex: Integer; dwNewLong: Longint): Longint; external 'SetWindowLongA@user32.dll stdcall';
function CallWindowProc(lpPrevWndFunc: Longint; hWnd: HWND; Msg: UINT; wParam, lParam: Longint): Longint; external 'CallWindowProcA@user32.dll stdcall';

function WrapCallback(callback:TISDoneCallback; paramcount:integer):longword;external 'wrapcallback@files:ISDone.dll stdcall delayload';

function ISArcExtract(CurComponent:Cardinal; PctOfTotal:double; InName, OutPath, ExtractedPath: AnsiString; DeleteInFile:boolean; Password, CfgFile, WorkPath: AnsiString; ExtractPCF: boolean ):boolean; external 'ISArcExtract@files:ISDone.dll stdcall delayload';
function IS7ZipExtract(CurComponent:Cardinal; PctOfTotal:double; InName, OutPath: AnsiString; DeleteInFile:boolean; Password: AnsiString):boolean; external 'IS7zipExtract@files:ISDone.dll stdcall delayload';
function ISRarExtract(CurComponent:Cardinal; PctOfTotal:double; InName, OutPath: AnsiString; DeleteInFile:boolean; Password: AnsiString):boolean; external 'ISRarExtract@files:ISDone.dll stdcall delayload';
function ISPrecompExtract(CurComponent:Cardinal; PctOfTotal:double; InName, OutFile: AnsiString; DeleteInFile:boolean):boolean; external 'ISPrecompExtract@files:ISDone.dll stdcall delayload';
function ISSRepExtract(CurComponent:Cardinal; PctOfTotal:double; InName, OutFile: AnsiString; DeleteInFile:boolean):boolean; external 'ISSrepExtract@files:ISDone.dll stdcall delayload';
function ISxDeltaExtract(CurComponent:Cardinal; PctOfTotal:double; minRAM,maxRAM:integer; InName, DiffFile, OutFile: AnsiString; DeleteInFile, DeleteDiffFile:boolean):boolean; external 'ISxDeltaExtract@files:ISDone.dll stdcall delayload';
function ISPackZIP(CurComponent:Cardinal; PctOfTotal:double; InName, OutFile: AnsiString;ComprLvl:integer; DeleteInFile:boolean):boolean; external 'ISPackZIP@files:ISDone.dll stdcall delayload';
function ShowChangeDiskWindow(Text, DefaultPath, SearchFile:AnsiString):boolean; external 'ShowChangeDiskWindow@files:ISDone.dll stdcall delayload';

function Exec2 (FileName, Param: PAnsiChar;Show:boolean):boolean; external 'Exec2@files:ISDone.dll stdcall delayload';
function ISFindFiles(CurComponent:Cardinal; FileMask:AnsiString; var ColFiles:integer):integer; external 'ISFindFiles@files:ISDone.dll stdcall delayload';
function ISPickFilename(FindHandle:integer; OutPath:AnsiString; var CurIndex:integer; DeleteInFile:boolean):boolean; external 'ISPickFilename@files:ISDone.dll stdcall delayload';
function ISGetName(TypeStr:integer):PAnsichar; external 'ISGetName@files:ISDone.dll stdcall delayload';
function ISFindFree(FindHandle:integer):boolean; external 'ISFindFree@files:ISDone.dll stdcall delayload';
function ISExec(CurComponent:Cardinal; PctOfTotal,SpecifiedProcessTime:double; ExeName,Parameters,TargetDir,OutputStr:AnsiString;Show:boolean):boolean; external 'ISExec@files:ISDone.dll stdcall delayload';

function SrepInit(TmpPath:PAnsiChar;VirtMem,MaxSave:Cardinal):boolean; external 'SrepInit@files:ISDone.dll stdcall delayload';
function PrecompInit(TmpPath:PAnsiChar;VirtMem:cardinal;PrecompVers:single):boolean; external 'PrecompInit@files:ISDone.dll stdcall delayload';
function FileSearchInit(RecursiveSubDir:boolean):boolean; external 'FileSearchInit@files:ISDone.dll stdcall delayload';
function ISDoneInit(RecordFileName:AnsiString; TimeType,Comp1,Comp2,Comp3:Cardinal; WinHandle, NeededMem:longint; callback:TISDoneCallback):boolean; external 'ISDoneInit@files:ISDone.dll stdcall';
function ISDoneStop:boolean; external 'ISDoneStop@files:ISDone.dll stdcall';
function ChangeLanguage(Language:AnsiString):boolean; external 'ChangeLanguage@files:ISDone.dll stdcall delayload';
function SuspendProc:boolean; external 'SuspendProc@files:ISDone.dll stdcall';
function ResumeProc:boolean; external 'ResumeProc@files:ISDone.dll stdcall';

// Функция пытается получить путь из реестра
(*procedure GetCopyEditDir();
var
  S: String;
begin
  S:= '';
  if not RegQueryStringValue(HKLM, 'SOFTWARE\Wow6432Node\Bethesda Softworks\Fallout3', 'Installed Path', S) then
    S:= CustomMessage('ChooseDir');
  CopyDirEdit.Text:= S;
end;      *)

procedure click_CopyDirBrowse(Sender: TObject);
var
  S: String;
begin
  S:= '';
  if not BrowseForFolder(CustomMessage('ChooseDirPrompt'), S, False) then
    S:= CustomMessage('ChooseDir');

  CopyDirEdit.Text:= S;
end;

Function NumToStr(Float: Extended): String;
  Begin
  Result:= Format('%.2n', [Float]); StringChange(Result, ',', '.');
  while ((Result[Length(Result)] = '0') or (Result[Length(Result)] = '.')) and (Pos('.', Result) > 0) do
  SetLength(Result, Length(Result)-1);
End;

var
  FreeMB, TotalMB: Cardinal;
  NeedSize, TotalNeedSize:Integer; TotalNeedSpaceLabel,NeedSpaceLabel,FreeSpaceLabel: TLabel;

function MbOrTb(Float: Extended): String;
begin
	if Float/1024 < 1024 then Result:= format('%.2n', [Float/1024])+' МБ' else
		Result:= format('%.2n', [Float/(1024*1024)])+' ГБ';
    StringChange(Result, ',', '.');
end;

// Инициализация общих процентов
procedure pctinit();
begin
  pctBase:= 0;
  pctVal:= 0;
end;

// Указываем процент для последующей операции
procedure setpct(v: Extended);
begin
  pctBase:= pctBase + pctVal;
  pctVal:= v;
end;

// Выполняется при ошибке установки - удаление файлов
    (*
procedure InstallFailed();
var
  Res: Integer;
begin
  Exec(ExpandConstant('{uninstallexe}'), '/SILENT', '', SW_SHOW, ewWaitUntilTerminated, Res);
  DelTree(ExpandConstant('{app}'), true, true, true);
end;
*)
// Обновление общего прогресса
procedure pctUpdateProgress();
begin
  case InstallState of
    SS_ISDONE, SS_COPY, SS_RENAME: begin
      pctPB1.Position:= round( 1.0 * pctPB1.Max * (pctBase + 1.0 * pctPB2.Position/pctPB2.Max * pctVal) );
    end;
  else
    pctPB1.Position:= round( 1.0 * pctPB1.Max * WizardForm.ProgressGauge.Position/WizardForm.ProgressGauge.Max * pctVal );
  end;
  pctInfo1.Caption:= Format(CustomMessage('ProgressTotal'), [pctPB1.Position*100.0/pctPB1.Max]);
end;

// Увеличивает прогресс второго прогрессбара
procedure PB2PosInc(n: Integer);
begin
  pctPB2.Position:= pctPB2.Position + n;
  pctUpdateProgress();
end;

// Кэлбэк библиотеки копирования файлов
// Выдает прогресс копирования файла (-ов)
function cb_CopyFile( what: PAnsiChar; int1: Longint; str: PAnsiChar): Boolean;
begin
	if (string(what) = 'allsize') then begin
    pctPB2.Position:= 0;
		pctPB2.Max:= int1;
  end;

	if(string(what) = 'filename') then
		WizardForm.FilenameLabel.Caption:= MinimizePathName(str, WizardForm.FilenameLabel.Font, WizardForm.FilenameLabel.Width);
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	if (string(what) = 'write') then begin
		pctInfo2.Caption:= Format(CustomMessage('ProgressCopy'), [MbOrTb(int1), MbOrTb(pctPB2.Max)]);
		pctPB2.Position:= Round(int1);
	end;
  pctUpdateProgress();
	Application.ProcessMessages;
end;

// Кэлбэк библиотеки ISDone
// Выдает прогресс извлечения архивов
function cb_ISDone(OveralPct,CurrentPct: integer;CurrentFile,TimeStr1,TimeStr2,TimeStr3:PAnsiChar): longword;
begin
  if OveralPct <= 1000 then
    pctPB2.Position := round(OveralPct / 1000.0 * pctPB2.Max);

  WizardForm.FilenameLabel.Caption:= MinimizePathName(CurrentFile, WizardForm.FilenameLabel.Font, WizardForm.FilenameLabel.Width);
  pctUpdateProgress();
	Application.ProcessMessages;

  Result := Integer(InstallCancel);
end;

// Кэлбэк обновления процесса установки файлов
function cb_PGUpdate(h:hWnd;Msg,wParam,lParam:Longint):Longint;
begin
  Result:=CallWindowProc(PBOldProc,h,Msg,wParam,lParam);
  if (Msg = $402) and (WizardForm.ProgressGauge.Position>WizardForm.ProgressGauge.Min) then begin
    pctPB2.Position:= round( 1.0 * WizardForm.ProgressGauge.Position/WizardForm.ProgressGauge.Max * pctPB2.Max );
    pctUpdateProgress();
    Application.ProcessMessages;
  end;
end;


// Процедуры копирования, извлечения, переименования

// Извлечение с помощью ISDone
function proc_ISDoneRun(): Boolean;
var
  Comps1,Comps2,Comps3, TmpValue:cardinal;
  FindHandle1,ColFiles1,CurIndex1,tmp:integer;
  ExecError:boolean;
  InFilePath,OutFilePath,OutFileName:PAnsiChar;
begin
  InstallState:= SS_ISDONE;
  Result:= false;
  pctInfo2.Caption:= '';
  WizardForm.StatusLabel.Caption:= CustomMessage('StatusExtract');
  pctPB2.Position:= 0;
  pctPB2.Max:= 10000;

  ExtractTemporaryFile('unarc.dll');

#ifdef PrecompInside
  ExtractTemporaryFile('CLS-precomp.dll');
  ExtractTemporaryFile('packjpg_dll.dll');
  ExtractTemporaryFile('packjpg_dll1.dll');
  ExtractTemporaryFile('precomp.exe');
  ExtractTemporaryFile('zlib1.dll');
#endif
#ifdef SrepInside
  ExtractTemporaryFile('CLS-srep.dll');
#endif
#ifdef MSCInside
  ExtractTemporaryFile('CLS-MSC.dll');
#endif
#ifdef facompress
    ExtractTemporaryFile('facompress.dll'); //ускоряет распаковку .arc архивов.
#endif
#ifdef records
    ExtractTemporaryFile('records.inf');
#endif
#ifdef precomp
  #if precomp == "0.38"
    ExtractTemporaryFile('precomp038.exe');
  #else
    #if precomp == "0.4"
      ExtractTemporaryFile('precomp040.exe');
    #else
      #if precomp == "0.41"
        ExtractTemporaryFile('precomp041.exe');
      #else
        #if precomp == "0.42"
          ExtractTemporaryFile('precomp042.exe');
        #else
          ExtractTemporaryFile('precomp038.exe');
          ExtractTemporaryFile('precomp040.exe');
          ExtractTemporaryFile('precomp041.exe');
          ExtractTemporaryFile('precomp042.exe');
        #endif
      #endif
    #endif
  #endif
#endif
#ifdef unrar
    ExtractTemporaryFile('Unrar.dll');
#endif
#ifdef XDelta
    ExtractTemporaryFile('XDelta3.dll');
#endif
#ifdef PackZIP
    ExtractTemporaryFile('7z.dll');
    ExtractTemporaryFile('PackZIP.exe');
#endif

    ExtractTemporaryFile('English.ini');

// Подготавливаем переменную, содержащую всю информацию о выделенных компонентах для ISDone.dll
// максимум 96 компонентов.
    Comps1:=0; Comps2:=0; Comps3:=0;
    TmpValue:=1;
    if IsComponentSelected('general\full') then Comps1:=Comps1+TmpValue;          //компонент 1+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\Master') then Comps1:=Comps1+TmpValue;        //компонент 2+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\Master\CollisionRagdollPack') then Comps1:=Comps1+TmpValue;       //компонент 3+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\Base') then Comps1:=Comps1+TmpValue;          //компонент 4+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\Adventures') then Comps1:=Comps1+TmpValue;    //компонент 5+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\AWOP') then Comps1:=Comps1+TmpValue;          //компонент 6+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\Creatures') then Comps1:=Comps1+TmpValue;     //компонент 7+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\Factions') then Comps1:=Comps1+TmpValue;      //компонент 8+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\Followers') then Comps1:=Comps1+TmpValue;     //компонент 9+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\Gear') then Comps1:=Comps1+TmpValue;          //компонент 10+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\Gear\IMPACT\TheBasementDweller') then Comps1:=Comps1+TmpValue;             //компонент 11+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\Gear\IMPACT\TheMichaelBay') then Comps1:=Comps1+TmpValue;             //компонент 12+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\Gear\AtOneTwo\HQ') then Comps1:=Comps1+TmpValue;             //компонент 13+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\Gear\AtOneTwo\LQ') then Comps1:=Comps1+TmpValue;             //компонент 14+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\Gear\T60P\HQ') then Comps1:=Comps1+TmpValue;             //компонент 15+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\Gear\T60P\LQ') then Comps1:=Comps1+TmpValue;             //компонент 16+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\Gear\WeaponsOverride_DLC') then Comps1:=Comps1+TmpValue;             //компонент 17+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\Gear\WeaponsOverride_Vanilla') then Comps1:=Comps1+TmpValue;             //компонент 18+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\Interiors') then Comps1:=Comps1+TmpValue;             //компонент 19
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\Items') then Comps1:=Comps1+TmpValue;             //компонент 20+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\Items\Boom_to_the_Moon_Radio_Station_Music') then Comps1:=Comps1+TmpValue;             //компонент 21+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\Items\Skyrocket_Cafe_Radio_Station_Music') then Comps1:=Comps1+TmpValue;             //компонент 22+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\MoreGear') then Comps1:=Comps1+TmpValue;             //компонент 23+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\MoreQuests') then Comps1:=Comps1+TmpValue;             //компонент 24+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\MoreQuests\Corvega_FrenchVoiceActing') then Comps1:=Comps1+TmpValue;             //компонент 25+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\MoreQuests\MoreQuests_Radio') then Comps1:=Comps1+TmpValue;             //компонент 26+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\Perks') then Comps1:=Comps1+TmpValue;             //компонент 27+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\PlayerHomes') then Comps1:=Comps1+TmpValue;             //компонент 28+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\Quests') then Comps1:=Comps1+TmpValue;             //компонент 29+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\Races') then Comps1:=Comps1+TmpValue;             //компонент 30+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\Radio') then Comps1:=Comps1+TmpValue;             //компонент 31+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\RedesignHD') then Comps1:=Comps1+TmpValue;             //компонент 32+
    TmpValue:=1;
    if IsComponentSelected('modules\RedesignHD\FCO_HairRetexture') then Comps2:=Comps2+TmpValue;             //компонент 33+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\SomeguySeries') then Comps2:=Comps2+TmpValue;             //компонент 34+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\Wasteland') then Comps2:=Comps2+TmpValue;             //компонент 35+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\Wasteland\Flora_DC\Flora_DC_Forested') then Comps2:=Comps2+TmpValue;             //компонент 36+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\Wasteland\LocationsPlusRadio') then Comps2:=Comps2+TmpValue;             //компонент 37+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\Wasteland\NiptonRebuiltRadio') then Comps2:=Comps2+TmpValue;             //компонент 38+
    TmpValue:=TmpValue*2;
    if IsComponentSelected('modules\Worlds') then Comps2:=Comps2+TmpValue;             //компонент 39
    TmpValue:=TmpValue*2;
    if IsComponentSelected('global_addons\AdvancedRecon') then Comps2:=Comps2+TmpValue;             //компонент 40
    TmpValue:=TmpValue*2;
    if IsComponentSelected('global_addons\Alton') then Comps2:=Comps2+TmpValue;             //компонент 41
    TmpValue:=TmpValue*2;
    if IsComponentSelected('global_addons\AmQuest') then Comps2:=Comps2+TmpValue;             //компонент 42
    TmpValue:=TmpValue*2;
    if IsComponentSelected('global_addons\AQFH') then Comps2:=Comps2+TmpValue;             //компонент 43
    TmpValue:=TmpValue*2;
    if IsComponentSelected('global_addons\DomeCity') then Comps2:=Comps2+TmpValue;             //компонент 44
    TmpValue:=TmpValue*2;
    if IsComponentSelected('global_addons\MothershipCrew') then Comps2:=Comps2+TmpValue;             //компонент 45
    

 

//    .....
// см. справку


#ifdef precomp
  PCFVer:={#precomp};
#else
  PCFVer:=0;
#endif
  if ISDoneInit(ExpandConstant('{src}\records.inf'), $F777, Comps1,Comps2,Comps3, MainForm.Handle, {#NeedMem}, @cb_ISDone) then begin
    while (true) do begin
      // для процесса извлечения архивов можно получить общий объем всех операций
      // поэтому здесь заморачиваться с процентами не нужно, как в случае копирования
      setpct(0.5);

      if not SrepInit('',512,0) then break;
      if not PrecompInit('',128,PCFVer) then break;
      if not FileSearchInit(true) then break;

      // по функциям ISDone смотри хелп
      //if not ISArcExtract ( 0, 0, ExpandConstant('{src}\setup.arc'), ExpandConstant('{app}\Data\'), '', false, '', '', ExpandConstant('{app}'), notPCFonFLY {PCFonFLY}) then break;

//    далее находятся закомментированые примеры различных функций распаковки (чтобы каждый раз не лазить в справку за примерами)


      if not IS7ZipExtract ( 1, 0, ExpandConstant('{src}\setup.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 2, 0, ExpandConstant('{src}\ResourceData\modules\Master\Main\SFW-Master_Resources_v1.80.7z'), ExpandConstant('{app}\Data\'), false, '') then break;
      if not IS7ZipExtract ( 2, 0, ExpandConstant('{src}\ResourceData\modules\Master\Main\SFW-Master_UnpackedResources_v1.80.7z'), ExpandConstant('{app}\Data\'), false, '') then break;
      if not IS7ZipExtract ( 2, 0, ExpandConstant('{src}\ResourceData\modules\Master\Main\SFW-Master-v1.80.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 3, 0, ExpandConstant('{src}\ResourceData\modules\Master\Optional\SFW-Master - Collision&RagdollPack.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 4, 0, ExpandConstant('{src}\ResourceData\modules\Base\Main\RA-Base-Resources-Robert_Type4.7z'), ExpandConstant('{app}\Data\'), false, '') then break;
      if not IS7ZipExtract ( 4, 0, ExpandConstant('{src}\ResourceData\modules\Base\Main\RA-Base-Resources-v1.13.7z'), ExpandConstant('{app}\Data\'), false, '') then break;
      if not IS7ZipExtract ( 4, 0, ExpandConstant('{src}\ResourceData\modules\Base\Main\RA-Base-v1.13.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 5, 0, ExpandConstant('{src}\ResourceData\modules\Adventures\Main\RA-Adventures_Resources_1.01.7z'), ExpandConstant('{app}\Data\'), false, '') then break;
      if not IS7ZipExtract ( 5, 0, ExpandConstant('{src}\ResourceData\modules\Adventures\Main\RA-Adventures_1.01.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 6, 0, ExpandConstant('{src}\ResourceData\modules\AWOP\Main\RA-AWorldOfPain_1.04.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 7, 0, ExpandConstant('{src}\ResourceData\modules\Creatures\Main\RA-Creatures-v1.05.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 8, 0, ExpandConstant('{src}\ResourceData\modules\Factions\Main\RA-Factions-v1.04a.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 9, 0, ExpandConstant('{src}\ResourceData\modules\Followers\Main\RA-Followers-Resources-v1.21.7z'), ExpandConstant('{app}\Data\'), false, '') then break;
      if not IS7ZipExtract ( 9, 0, ExpandConstant('{src}\ResourceData\modules\Followers\Main\RA-Followers-v1.21.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 10, 0, ExpandConstant('{src}\ResourceData\modules\Gear\Main\RA-Gear_Resources_v1.13.7z'), ExpandConstant('{app}\Data\'), false, '') then break;
      if not IS7ZipExtract ( 10, 0, ExpandConstant('{src}\ResourceData\modules\Gear\Main\RA-Gear_plugin_v1.13.7z'), ExpandConstant('{app}\Data\'), false, '') then break;
      if not IS7ZipExtract ( 10, 0, ExpandConstant('{src}\ResourceData\modules\Gear\Main\RA-Gear_UnpackedResources.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 11, 0, ExpandConstant('{src}\ResourceData\modules\Gear\Optional\RA-Gear_IMPACT_Optionals\TheBasementDweller\SFW-Master - IMPACT.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 12, 0, ExpandConstant('{src}\ResourceData\modules\Gear\Optional\RA-Gear_IMPACT_Optionals\TheMichaelBay\SFW-Master - IMPACT.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 13, 0, ExpandConstant('{src}\ResourceData\modules\Gear\Optional\RA-Gear_Optionals_AtOneTwo\HQ\textures.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 14, 0, ExpandConstant('{src}\ResourceData\modules\Gear\Optional\RA-Gear_Optionals_AtOneTwo\LQ\textures.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 15, 0, ExpandConstant('{src}\ResourceData\modules\Gear\Optional\RA-Gear_Optionals_T60P\HQ\Textures.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 16, 0, ExpandConstant('{src}\ResourceData\modules\Gear\Optional\RA-Gear_Optionals_T60P\LQ\Textures.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 17, 0, ExpandConstant('{src}\ResourceData\modules\Gear\Optional\RA-Gear_WeaponsOverride_DLC.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 18, 0, ExpandConstant('{src}\ResourceData\modules\Gear\Optional\RA-Gear_WeaponsOverride_Vanilla.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 19, 0, ExpandConstant('{src}\ResourceData\modules\Interiors\Main\RA-Interiors_v1.12.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 20, 0, ExpandConstant('{src}\ResourceData\modules\Items\Main\RA-Items_Resources_v1.16.7z'), ExpandConstant('{app}\Data\'), false, '') then break;
      if not IS7ZipExtract ( 20, 0, ExpandConstant('{src}\ResourceData\modules\Items\Main\RA-Items_v1.16.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 21, 0, ExpandConstant('{src}\ResourceData\modules\Items\Optional\Boom_to_the_Moon-Radio_Station_Music.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 22, 0, ExpandConstant('{src}\ResourceData\modules\Items\Optional\Skyrocket-Cafe-Radio_Station_Music.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 23, 0, ExpandConstant('{src}\ResourceData\modules\MoreGear\Main\RA-MoreGear_Resources_FOOK2.7z'), ExpandConstant('{app}\Data\'), false, '') then break;
      if not IS7ZipExtract ( 23, 0, ExpandConstant('{src}\ResourceData\modules\MoreGear\Main\RA-MoreGear_Resources_Part1.7z'), ExpandConstant('{app}\Data\'), false, '') then break;
      if not IS7ZipExtract ( 23, 0, ExpandConstant('{src}\ResourceData\modules\MoreGear\Main\RA-MoreGear_Resources_Part2.7z'), ExpandConstant('{app}\Data\'), false, '') then break;
      if not IS7ZipExtract ( 23, 0, ExpandConstant('{src}\ResourceData\modules\MoreGear\Main\RA-MoreGear_UnpackedResources.7z'), ExpandConstant('{app}\Data\'), false, '') then break;
      if not IS7ZipExtract ( 23, 0, ExpandConstant('{src}\ResourceData\modules\MoreGear\Main\RA-MoreGear_v1.12a.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 24, 0, ExpandConstant('{src}\ResourceData\modules\MoreQuests\Main\RA-MoreQuests_Resources_v1.14.7z'), ExpandConstant('{app}\Data\'), false, '') then break;
      if not IS7ZipExtract ( 24, 0, ExpandConstant('{src}\ResourceData\modules\MoreQuests\Main\RA-MoreQuests_Resources_Vanessa.7z'), ExpandConstant('{app}\Data\'), false, '') then break;
      if not IS7ZipExtract ( 24, 0, ExpandConstant('{src}\ResourceData\modules\MoreQuests\Main\RA-MoreQuests_v1.14.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 25, 0, ExpandConstant('{src}\ResourceData\modules\MoreQuests\Optional\RA-MoreQuests_Corvega_FrenchVoiceActing.7z'), ExpandConstant('{app}\Data\sound\voice\'), false, '') then break;

      if not IS7ZipExtract ( 26, 0, ExpandConstant('{src}\ResourceData\modules\MoreQuests\Optional\RA-MoreQuests_Radio.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 27, 0, ExpandConstant('{src}\ResourceData\modules\Perks\Main\RA-Perks_Resources-v1.17.7z'), ExpandConstant('{app}\Data\'), false, '') then break;
      if not IS7ZipExtract ( 27, 0, ExpandConstant('{src}\ResourceData\modules\Perks\Main\RA-Perks_v1.17.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 28, 0, ExpandConstant('{src}\ResourceData\modules\PlayerHomes\Main\RA-PlayerHomes_Plugin-v0.68.7z'), ExpandConstant('{app}\Data\'), false, '') then break;
      if not IS7ZipExtract ( 28, 0, ExpandConstant('{src}\ResourceData\modules\PlayerHomes\Main\RA-PlayerHomes_Resources-v0.68.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 29, 0, ExpandConstant('{src}\ResourceData\modules\Quests\Main\RA-Quests-Resources_v1.10a.7z'), ExpandConstant('{app}\Data\'), false, '') then break;
      if not IS7ZipExtract ( 29, 0, ExpandConstant('{src}\ResourceData\modules\Quests\Main\RA-Quests-v1.10.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 30, 0, ExpandConstant('{src}\ResourceData\modules\Races\Main\RA-Races_Resources.7z'), ExpandConstant('{app}\Data\'), false, '') then break;
      if not IS7ZipExtract ( 30, 0, ExpandConstant('{src}\ResourceData\modules\Races\Main\RA-Races_v1.03.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 31, 0, ExpandConstant('{src}\ResourceData\modules\Radio\Main\RA-Radio_1.01.7z'), ExpandConstant('{app}\Data\'), false, '') then break;
      if not IS7ZipExtract ( 31, 0, ExpandConstant('{src}\ResourceData\modules\Radio\Main\RA-Radio_Resources.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 32, 0, ExpandConstant('{src}\ResourceData\modules\RedesignHD\Main\RA-RedesignHD-Resources_v1.19.7z'), ExpandConstant('{app}\Data\'), false, '') then break;
      if not IS7ZipExtract ( 32, 0, ExpandConstant('{src}\ResourceData\modules\RedesignHD\Main\RA-RedesignHD-v1.19.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 33, 0, ExpandConstant('{src}\ResourceData\modules\RedesignHD\Optional\RA-RedesignHD-FCO-HairRetexture.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 34, 0, ExpandConstant('{src}\ResourceData\modules\SomeguySeries\Main\RA-SomeguySeries-Resources-v1.34.7z'), ExpandConstant('{app}\Data\'), false, '') then break;
      if not IS7ZipExtract ( 34, 0, ExpandConstant('{src}\ResourceData\modules\SomeguySeries\Main\RA-SomeguySeries-v1.34.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 35, 0, ExpandConstant('{src}\ResourceData\modules\Wasteland\Main\RA-Wasteland_Resources_Songs_Video.7z'), ExpandConstant('{app}\Data\'), false, '') then break;
      if not IS7ZipExtract ( 35, 0, ExpandConstant('{src}\ResourceData\modules\Wasteland\Main\RA-Wasteland_Resources_v1.42.7z'), ExpandConstant('{app}\Data\'), false, '') then break;
      if not IS7ZipExtract ( 35, 0, ExpandConstant('{src}\ResourceData\modules\Wasteland\Main\RA-Wasteland_v1.42.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 36, 0, ExpandConstant('{src}\ResourceData\modules\Wasteland\Optional\RA-Wasteland-Flora-DC-Forested.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 37, 0, ExpandConstant('{src}\ResourceData\modules\Wasteland\Optional\RA-Wasteland_Optional_-_LocationsPlusRadio.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 38, 0, ExpandConstant('{src}\ResourceData\modules\Wasteland\Optional\RA-Wasteland_Optional_-_NiptonRebuiltRadio.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 39, 0, ExpandConstant('{src}\ResourceData\modules\Worlds\Main\RA-Worlds_Resources_v1.00.7z'), ExpandConstant('{app}\Data\'), false, '') then break;
      if not IS7ZipExtract ( 39, 0, ExpandConstant('{src}\ResourceData\modules\Worlds\Main\RA-Worlds_v1.00.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 40, 0, ExpandConstant('{src}\ResourceData\global_addons\AdvancedRecon\RA-AdvancedRecon_Resources.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 41, 0, ExpandConstant('{src}\ResourceData\global_addons\Alton\Alton-IL_203_Resources.7z'), ExpandConstant('{app}\Data\'), false, '') then break;
      if not IS7ZipExtract ( 41, 0, ExpandConstant('{src}\ResourceData\global_addons\Alton\Alton-IL_203_U6.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 42, 0, ExpandConstant('{src}\ResourceData\global_addons\AmQuest\AmQuest_RA_1-2-Resources.7z'), ExpandConstant('{app}\Data\'), false, '') then break;
      if not IS7ZipExtract ( 42, 0, ExpandConstant('{src}\ResourceData\global_addons\AmQuest\AmQuest_RA_1-2-U5.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 43, 0, ExpandConstant('{src}\ResourceData\global_addons\AQFH\RA-AQFH_Plugin_1.5.7z'), ExpandConstant('{app}\Data\'), false, '') then break;
      if not IS7ZipExtract ( 43, 0, ExpandConstant('{src}\ResourceData\global_addons\AQFH\RA-AQFH_Resources_1.5.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 44, 0, ExpandConstant('{src}\ResourceData\global_addons\DomeCity\Main\RA-BeyondBoulderDome_Resources.7z'), ExpandConstant('{app}\Data\'), false, '') then break;
      if not IS7ZipExtract ( 44, 0, ExpandConstant('{src}\ResourceData\global_addons\DomeCity\Main\RA-BeyondBoulderDome_V1-2-U6.7z'), ExpandConstant('{app}\Data\'), false, '') then break;

      if not IS7ZipExtract ( 45, 0, ExpandConstant('{src}\ResourceData\global_addons\MothershipCrew\Main\RA-Mothership-Zeta-Crew_1-66-U7.7z'), ExpandConstant('{app}\Data\'), false, '') then break;;
      if not IS7ZipExtract ( 45, 0, ExpandConstant('{src}\ResourceData\global_addons\MothershipCrew\Main\RA-Mothership-Zeta-Crew_Resources_U7.7z'), ExpandConstant('{app}\Data\'), false, '') then break;



    (*  if not IS7ZipExtract   ( 0, 0, ExpandConstant('{src}\CODMW2.7z'), ExpandConstant('{app}\data1'), false, '') then break;
      if not ISRarExtract    ( 0, 0, ExpandConstant('{src}\data_*.rar'), ExpandConstant('{app}'), false, '') then break;
      if not ISSRepExtract   ( 0, 0, ExpandConstant('{app}\data1024_1024.srep'),ExpandConstant('{app}\data1024.arc'), true) then break;
      if not ISPrecompExtract( 0, 0, ExpandConstant('{app}\data.pcf'),    ExpandConstant('{app}\data.7z'), true) then break;
      if not ISxDeltaExtract ( 0, 0, 0, 640, ExpandConstant('{app}\in.pcf'), ExpandConstant('{app}\*.diff'),   ExpandConstant('{app}\out.dat'), false, false) then break;
      if not ISPackZIP       ( 0, 0, ExpandConstant('{app}\1a1\*'), ExpandConstant('{app}\1a1.pak'), 2, false ) then break;
      if not ISExec          ( 0, 0, 0, ExpandConstant('{tmp}\Arc.exe'), ExpandConstant('x -o+ "{src}\001.arc" "{app}\"'), ExpandConstant('{tmp}'), '...',false) then break;
      if not ShowChangeDiskWindow ('Пожалуйста, вставьте второй диск и дождитесь его инициализации.', ExpandConstant('{src}'),'CODMW_2.arc') then break;

//    распаковка группы файлов посредством внешнего приложения

      FindHandle1:=ISFindFiles(0,ExpandConstant('{app}\*.ogg'),ColFiles1);
      ExecError:=false;
      while not ExecError and ISPickFilename(FindHandle1,ExpandConstant('{app}\'),CurIndex1,true) do begin
        InFilePath:=ISGetName(0);
        OutFilePath:=ISGetName(1);
        OutFileName:=ISGetName(2);
        ExecError:=not ISExec(0, 0, 0, ExpandConstant('{tmp}\oggdec.exe'), '"'+InFilePath+'" -w "'+OutFilePath+'"',ExpandConstant('{tmp}'),OutFileName,false);
      end;
      ISFindFree(FindHandle1);
      if ExecError then break;
*)
      Result:= true;
      break;
    end;
    ISDoneStop;
  end;
end;

// Копирование файлов
function proc_CopyDirData(): Boolean;
begin
  InstallState:= SS_COPY; // Код текущей операции
  Result:= false;
  pctInfo2.Caption:= '';
  WizardForm.StatusLabel.Caption:= CustomMessage('StatusCopy');
  pctPB2.Position:= 0;
  pctPB2.Max:= 10000;

  while (true) do begin
    // Т.к. папок, откуда копировать файлы может быть несколько,
    // Необходимо указать проценты для каждого процесса копирования
    setpct(0.395);
    //                                         <откуда копируем>      <куда копируем>
  (*  if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Fallout - Meshes.bsa', ExpandConstant('{app}\Data\Sound'), False)  <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Fallout - Sound.bsa', ExpandConstant('{app}\Data\Sound'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Fallout - Textures.bsa', ExpandConstant('{app}\Data\Sound'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Anchorage - Main.bsa', ExpandConstant('{app}\Data'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Anchorage - Sounds.bsa', ExpandConstant('{app}\Data'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\BrokenSteel - Main.bsa', ExpandConstant('{app}\Data'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\BrokenSteel - Sounds.bsa', ExpandConstant('{app}\Data'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\PointLookout - Main.bsa', ExpandConstant('{app}\Data'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\PointLookout - Sounds.bsa', ExpandConstant('{app}\Data'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\ThePitt - Main.bsa', ExpandConstant('{app}\Data'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\ThePitt - Sounds.bsa', ExpandConstant('{app}\Data'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Zeta - Main.bsa', ExpandConstant('{app}\Data'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Zeta - Sounds.bsa', ExpandConstant('{app}\Data'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\1 year later.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\2 weeks later.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\3 years later.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\6 years later.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\9 years later.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\B01.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\B02.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\B03.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\B04.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\B05.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\B06.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\B07.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\B08.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\B09.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\B10.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\B11.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\B12.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\B13.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\B14.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\B15.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\B16.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\B17.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\B18.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\B19.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\B20.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\B21.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\B22.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\B23.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\B24.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\B25.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\B26.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\B27.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\B28.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\B29.bik', ExpandConstant('{app}\Data\Video'), False) <> 1 then break;
    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Video\Fallout INTRO Vsk.bik', ExpandConstant('{app}\Data'), False) <> 1 then break;     *)


//    if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Fallout - Misc.bsa', ExpandConstant('{app}\Data'), False) <> 1 then break;
   //  if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Fallout - Meshes.bsa', ExpandConstant('{app}\Data\Sound'), False)  <> 1 then break;
  //  if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Fallout - Sound.bsa', ExpandConstant('{app}\Data'), False) <> 1 then break;
  //  if isCopyFile(CallbackAddr('cb_CopyFile'), CopyDirEdit.Text+'\Data\Fallout - Textures.bsa', ExpandConstant('{app}\Data'), False) <> 1 then break;
    

    Result:= true;
    break;
  end;
end;

// Переименование файлов

function proc_RenameFiles(): Boolean;
begin
  InstallState:= SS_RENAME;
  Result:= False;
  pctInfo2.Caption:= '';
  WizardForm.StatusLabel.Caption:= CustomMessage('StatusRename');

  setpct(0.005);
  pctPB2.Position:= 0;
  pctPB2.Max:= 100;   // Кол-во переименовываемых файлов

  while (true) do begin
    //                 <исходный файл>                <новое имя файла>
 (*   if (not RenameFile(ExpandConstant('{app}\Data\Sound\Fallout - Meshes.bsa'), ExpandConstant('{app}\Data\Sound\GunRunnersArsenal - SFWRF3 - Meshes.bsa'))) or InstallCancel then break;
    PB2PosInc(1);
    if (not RenameFile(ExpandConstant('{app}\Data\Sound\GunRunnersArsenal - SFWRF3 - Meshes.bsa'), ExpandConstant('{app}\Data\GunRunnersArsenal - SFWRF3 - Meshes.bsa'))) or InstallCancel then break;
    PB2PosInc(1);
    if (not RenameFile(ExpandConstant('{app}\Data\Sound\Fallout - Sound.bsa'), ExpandConstant('{app}\Data\Sound\GunRunnersArsenal - SFWRF3 - Sound.bsa'))) or InstallCancel then break;
    PB2PosInc(1);
    if (not RenameFile(ExpandConstant('{app}\Data\Sound\GunRunnersArsenal - SFWRF3 - Sound.bsa'), ExpandConstant('{app}\Data\GunRunnersArsenal - SFWRF3 - Sound.bsa'))) or InstallCancel then break;
    PB2PosInc(1);
    if (not RenameFile(ExpandConstant('{app}\Data\Sound\Fallout - Textures.bsa'), ExpandConstant('{app}\Data\Sound\GunRunnersArsenal - SFWRF3 - Textures.bsa'))) or InstallCancel then break;
    PB2PosInc(1);
    if (not RenameFile(ExpandConstant('{app}\Data\Sound\GunRunnersArsenal - SFWRF3 - Textures.bsa'), ExpandConstant('{app}\Data\GunRunnersArsenal - SFWRF3 - Textures.bsa'))) or InstallCancel then break;
    PB2PosInc(1);
    if (not RenameFile(ExpandConstant('{app}\Data\Fallout INTRO Vsk.bik'), ExpandConstant('{app}\Data\F3Intro.bik'))) or InstallCancel then break;
    PB2PosInc(1);
    if (not RenameFile(ExpandConstant('{app}\Data\F3Intro.bik'), ExpandConstant('{app}\Data\Video\F3Intro.bik'))) or InstallCancel then break;
    PB2PosInc(1);
    if (not RenameFile(ExpandConstant('{app}\Data\F3Intro.bik'), ExpandConstant('{app}\Data\Video\F3Intro.bik'))) or InstallCancel then break;
    PB2PosInc(1);
    if (not RenameFile(ExpandConstant('{app}\Data\F3Intro.bik'), ExpandConstant('{app}\Data\Video\F3Intro.bik'))) or InstallCancel then break;
    PB2PosInc(1);         *)

    Result:= true;
    break;
  end;
end;

// Клик на кнопку "Далее"
// Если директория не найдена или нет нужного файла
// выдает сообщение об этом

function NextButtonClick(CurPageID: Integer): Boolean;
begin
  Result:= true;
  if (CurPageID = wpSelectDir) then begin
    // Ссотрим наличие директории
    (* if ((CopyDirEdit.Text = '') or (not DirExists(CopyDirEdit.Text))) then begin
      Result:= MsgBox(CustomMessage('InvalidDir1'), mbConfirmation, MB_YESNO) = IDYES;
      Exit;
    end;
    // Смотрим наличие файла в директории
    if (not FileExists(CopyDirEdit.Text+'\Data\Fallout - MenuVoices.bsa')) then begin
      Result:= MsgBox(CustomMessage('InvalidDir2'), mbConfirmation, MB_YESNO) = IDYES;
      Exit;
    end; *)
  end;
end;

// Отмена копирования/извлечения...
procedure click_CancelBtn(Sender: TObject); // Отмена дополнительных операций
var
  rCode: Integer;
begin
  if (InstallState = SS_ISDONE) then
    SuspendProc();

  rCode:= MsgBox(SetupMessage(msgExitSetupMessage), mbConfirmation, MB_YESNO);
  if rCode = IDYES then begin
    InstallCancel:= true;

    if InstallState = SS_COPY then begin
      BreakCopy();
    end;
  end;

  if (InstallState = SS_ISDONE) then
    ResumeProc();
end;

//*******************************ЗАПРЕТ НА УСТАНОВКУ ПРИ ЗАПУЩЕННОЙ ИГРЕ*******************************//
function CheckProcessRunning( aProcName,
                              aProcDesc: string ): boolean;
var
  ShellResult: boolean;
  ResultCode: integer;
  cmd: string;
  sl: TStringList;
  f: string;
  d: string;
begin
  cmd := 'for /f "delims=," %%i ' +
         'in (''tasklist /FI "IMAGENAME eq ' + aProcName + '" /FO CSV'') ' +
         'do if "%%~i"=="' + aProcName + '" exit 1';
  f := 'CheckProc.cmd';
  d := AddBackSlash( ExpandConstant( '{tmp}' ));
  sl := TStringList.Create;
  sl.Add( cmd );
  sl.Add( 'exit /0' );
  sl.SaveToFile( d + f );
  sl.Free;
  Result := true;
  while ( Result ) do
  begin
    ResultCode := 1;
    ShellResult := Exec( f,
                         '',
                         d,
                         SW_HIDE,
                         ewWaitUntilTerminated,
                         ResultCode );
    Result := ResultCode > 0;
    if Result and
       ( MsgBox( aProcDesc + ' запущен. Пожалуйста, закройте игру, чтобы продолжить установку.'#13#10 +
                 'Чтобы возобновить установку модификации, нажмите "Да", чтобы завершить установку, нажмите "Нет".',
                 mbConfirmation,
                 MB_YESNO ) <> IDYES ) then
      Break;
  end;
  DeleteFile( d + f );
end;

function IsWizardFormCreated(): Boolean;
begin
  Result := True;
  try
    WizardForm;
  except
    Result := False;
  end;
end;
//*******************************ЗАПРЕТ НА УСТАНОВКУ ПРИ ЗАПУЩЕННОЙ ИГРЕ*******************************//


//*******************************ОПИСАНИЕ КОМПОНЕНТОВ*******************************//


function disabledesc(): BOOL; external 'disabledesc@files:descctrl.dll stdcall';
function enabledesc(ComponentsListHandle: HWND; DescLabelHandle: HWND; DescStrings: PAnsiChar): BOOL; external 'enabledesc@files:descctrl.dll stdcall';

var
Info: TNewStaticText;
InfoCaption: TNewStaticText;
InfoPanel: TPanel;


//*******************************ОПИСАНИЕ КОМПОНЕНТОВ*******************************//

//*******************************СНЯТИЕ АТРИБУТОВ "ТОЛЬКО ДЛЯ ЧТЕНИЯ" С INI ФАЙЛОВ*******************************//

function GetFileAttributes(lpFileName: string): integer;
external 'GetFileAttributesW@kernel32.dll stdcall';
function SetFileAttributes(lpFileName: string; dwFileAttributes: integer): integer;
external 'SetFileAttributesW@kernel32.dll stdcall';

//*******************************СНЯТИЕ АТРИБУТОВ "ТОЛЬКО ДЛЯ ЧТЕНИЯ" С INI ФАЙЛОВ*******************************//

//*******************************УСТАНОВКА ШРИФТОВ*******************************//

#ifdef UNICODE
    #define A "W"
#else
    #define A "A"
#endif

const
    FR_PRIVATE = $10;

function AddFontResource(lpszFilename: String; fl, pdv: DWORD): Integer; external 'AddFontResourceEx{#A}@gdi32.dll stdcall';
function RemoveFontResource(lpFileName: String; fl, pdv: DWORD): BOOL; external 'RemoveFontResourceEx{#A}@gdi32.dll stdcall';

//*******************************УСТАНОВКА ШРИФТОВ*******************************//

//*******************************УСТАНОВКА И ИНИЦИАЛИЗАЦИЯ VCL-СТИЛЯ ДЛЯ ИНСТАЛЛЯТОРА + ДЕИНСТАЛЛЯТОРА*******************************//
// Импорт функции LoadVCLStyle из VclStylesInno.DLL
procedure LoadVCLStyle(VClStyleFile: String); external 'LoadVCLStyleW@files:VclStylesInno.dll stdcall setuponly';
procedure LoadVCLStyle_UnInstall(VClStyleFile: String); external 'LoadVCLStyleW@{#VCLStylesSkinPath}\VclStylesInno.dll stdcall uninstallonly';
// Импорт функции UnLoadVCLStyles из VclStylesInno.DLL
procedure UnLoadVCLStyles; external 'UnLoadVCLStyles@files:VclStylesInno.dll stdcall setuponly';
procedure UnLoadVCLStyles_UnInstall; external 'UnLoadVCLStyles@{#VCLStylesSkinPath}\VclStylesInno.dll stdcall uninstallonly';

function InitializeSetup(): Boolean;
begin
 ExtractTemporaryFile('Auric.vsf');
 LoadVCLStyle(ExpandConstant('{tmp}\Auric.vsf'));
 Result := True;
 //Запрет на установку при запущенной игре
 Result := not ( CheckProcessRunning( 'FalloutNV.exe',      'Fallout: New Vegas' ) or
                  CheckProcessRunning( 'FalloutNVLauncher.exe',      'Fallout: New Vegas'  ));
 //
  PBOldProc:= -1;
  Result:= True;
end;

function InitializeUninstall: Boolean;
begin
  Result := True;
  LoadVCLStyle_UnInstall(ExpandConstant('{#VCLStylesSkinPath}\Auric.vsf'));
  //Запрет на удаление при запущенной игре
  Result := not ( CheckProcessRunning( 'FalloutNV.exe',      'Fallout: New Vegas' ) or
                  CheckProcessRunning( 'FalloutNVLauncher.exe',      'Fallout: New Vegas'  ));
  //
end;
  //Запрет на установку при запущенной игре

//*******************************************УСТАНОВКА И ИНИЦИАЛИЗАЦИЯ VCL-СТИЛЯ ДЛЯ ИНСТАЛЛЯТОРА + ДЕИНСТАЛЛЯТОРА*******************************************//


//*******************************АВТООПРЕДЕЛЕНИЕ ИГРЫ ЧЕРЕЗ КЛЮЧИ В РЕЕСТРЕ*******************************//
function GetDirName(Value: string): string;
var
  InstallPath: string;
begin
  // Путь по умолчанию, который будет добавляются при последующем обращении к реестру
  // Ключевые запросы для пропавших ключей или для других косяков
  Result := '{pf}\Bethesda Softworks\Fallout New Vegas Ultimate Edition';
  // Запрос первого значения реестра, если попытка успешна, полученное значение возвращается
    if RegQueryStringValue(HKLM, 'Software\Bethesda Softworks\FalloutNV', 'Installed Path', InstallPath) then
      Result := InstallPath
  // Если первый запрос реестра провалился, то....
  else
  // Запрос второго значения реестра, если попытка успешна, полученное значение возвращается
    if RegQueryStringValue(HKLM, 'Software\Wow6432Node\Bethesda Softworks\FalloutNV', 'Installed Path', InstallPath) then
    Result := InstallPath;
end;
//*******************************АВТООПРЕДЕЛЕНИЕ ИГРЫ ЧЕРЕЗ КЛЮЧИ В РЕЕСТРЕ*******************************//




//*******************************ПРАВКА INI ПО ЖЕЛЕЗУ + ОПТИМИЗАЦИЯ + ПЕРЕИМЕНОВЫВАНИЕ ШЕЙДЕРОВ*******************************//
#define MakeVer(int v1, int v2, int v3) ((v1 << 24) + (v2 << 16) + (v3 << 8))

type
  TSystemInfo = record
    wProcessorArchitecture: Word;
    wReserved: Word;
    dwPageSize: DWORD;
    lpMinimumApplicationAddress: Integer;
    lpMaximumApplicationAddress: Integer;
    dwActiveProcessorMask: DWORD;
    dwNumberOfProcessors: DWORD;
    dwProcessorType: DWORD;
    dwAllocationGranularity: DWORD;
    wProcessorLevel: Integer;
    wProcessorRevision: Word;
  end;
#if ((Ver >= MakeVer(5, 5, 3)) && defined(UNICODE))
  TMemoryStatusEx = record
    dwLength: Longword;
    dwMemoryLoad: Longword;
    ullTotalPhys: Int64;
    ullAvailPhys: Int64;
    ullTotalPageFile: Int64;
    ullAvailPageFile: Int64;
    ullTotalVirtual: Int64;
    ullAvailVirtual: Int64;
    ullAvailExtendedVirtual: Int64;
  end;
#else
  TMemoryStatusEx = record
    dwLength: Longword;
    dwMemoryLoad: Longword;
    ullTotalPhysLo: Longword;
    ullTotalPhysHi: Longword;
    ullAvailPhysLo: Longword;
    ullAvailPhysHi: Longword;
    ullTotalPageFileLo: Longword;
    ullTotalPageFileHi: Longword;
    ullAvailPageFileLo: Longword;
    ullAvailPageFileHi: Longword;
    ullTotalVirtualLo: Longword;
    ullTotalVirtualHi: Longword;
    ullAvailVirtualLo: Longword;
    ullAvailVirtualHi: Longword;
    ullAvailExtendedVirtualLo: Longword;
    ullAvailExtendedVirtualHi: Longword;
  end;
#endif

procedure GetSystemInfo(var lpSystemInfo: TSystemInfo); external 'GetSystemInfo@kernel32.dll stdcall';
function GlobalMemoryStatusEx(var lpBuffer: TMemoryStatusEx): Boolean; external 'GlobalMemoryStatusEx@kernel32.dll stdcall';

procedure CurStepChanged(CurStep: TSetupStep);
var
  //переименовывание шейдеров
  OldName: string;
  NewName: String;
  //
  SI: TSystemInfo;
  MS: TMemoryStatusEx;
  mem: Extended;

begin
  if (CurStep = ssPostInstall) then begin
  (*  MS.dwLength:= sizeof(MS);
    GetSystemInfo(SI);
    GlobalMemoryStatusEx(MS);
    #if ((Ver >= MakeVer(5, 5, 3)) && defined(UNICODE))
      mem:= MS.ullTotalPhys;
    #else
      mem:= (MS.ullTotalPhysHi shl 32) + MS.ullTotalPhysLo;
    #endif
    //[Core+Memory]
    SetIniString('General', 'iNumHWThreads', IntToStr(SI.dwNumberOfProcessors), ExpandConstant('{userdocs}\My games\FalloutNV\Fallout.ini'));
    SetIniString('General', 'iNumHWThreads', IntToStr(SI.dwNumberOfProcessors), ExpandConstant('{userdocs}\My games\FalloutNV\FalloutPrefs.ini'));
    SetIniString('General', 'iNumHWThreads', IntToStr(SI.dwNumberOfProcessors), ExpandConstant('{app}\Fallout_default.ini'));

    SetIniString('CORE', 'TotalMemory', Format('%.0f', [mem/1024/1024]), ExpandConstant('{app}\Config.ini'));
    //SetIniString('CORE', 'TotalMemory', Format('16', [mem/1024/16384]), ExpandConstant('{app}\Config.ini'));
    //SetIniString('CORE', 'TotalMemory', Format('2', [mem/1024/2048]), ExpandConstant('{app}\Config.ini'));
    SetIniString('SOT', 'CARA', IntToStr(12), ExpandConstant('{app}\Config.ini'));
    SetIniString('SOT', 'bravor', IntToStr(1), ExpandConstant('{app}\Config.ini'));
    //[General]
    SetIniString('General', 'bUseThreadedAI', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\Fallout.ini'));
    SetIniString('General', 'bUseThreadedAI', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\FalloutPrefs.ini'));
    SetIniString('General', 'bUseThreadedAI', IntToStr(1), ExpandConstant('{app}\Fallout_default.ini'));
    SetIniString('General', 'bLoadFaceGenHeadEGTFiles', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\Fallout.ini'));
    SetIniString('General', 'bLoadFaceGenHeadEGTFiles', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\FalloutPrefs.ini'));
    SetIniString('General', 'bLoadFaceGenHeadEGTFiles', IntToStr(1), ExpandConstant('{app}\Fallout_default.ini'));
    SetIniString('General', 'bUseThreadedBlood', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\Fallout.ini'));
    SetIniString('General', 'bUseThreadedBlood', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\FalloutPrefs.ini'));
    SetIniString('General', 'bUseThreadedBlood', IntToStr(1), ExpandConstant('{app}\Fallout_default.ini'));
    SetIniString('General', 'bUseThreadedMorpher', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\Fallout.ini'));
    SetIniString('General', 'bUseThreadedMorpher', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\FalloutPrefs.ini'));
    SetIniString('General', 'bUseThreadedMorpher', IntToStr(1), ExpandConstant('{app}\Fallout_default.ini'));
    SetIniString('General', 'bUseThreadedTempEffects', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\Fallout.ini'));
    SetIniString('General', 'bUseThreadedTempEffects', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\FalloutPrefs.ini'));
    SetIniString('General', 'bUseThreadedTempEffects', IntToStr(1), ExpandConstant('{app}\Fallout_default.ini'));
    SetIniString('General', 'bUseThreadedParticleSystem', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\Fallout.ini'));
    SetIniString('General', 'bUseThreadedParticleSystem', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\FalloutPrefs.ini'));
    SetIniString('General', 'bUseThreadedParticleSystem', IntToStr(1), ExpandConstant('{app}\Fallout_default.ini'));
    //[Display]
    SetIniString('Display', 'iPresentInterval', IntToStr(0), ExpandConstant('{userdocs}\My games\FalloutNV\Fallout.ini'));
    SetIniString('Display', 'iPresentInterval', IntToStr(0), ExpandConstant('{userdocs}\My games\FalloutNV\FalloutPrefs.ini'));
    SetIniString('Display', 'iPresentInterval', IntToStr(0), ExpandConstant('{app}\Fallout_default.ini'));
    SetIniString('Display', 'bAllow30Shaders', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\Fallout.ini'));
    SetIniString('Display', 'bAllow30Shaders', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\FalloutPrefs.ini'));
    SetIniString('Display', 'bAllow30Shaders', IntToStr(1), ExpandConstant('{app}\Fallout_default.ini'));
    //[Archive]
    SetIniString('Archive', 'bInvalidateOlderFiles', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\Fallout.ini'));
    SetIniString('Archive', 'bInvalidateOlderFiles', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\FalloutPrefs.ini'));
    SetIniString('Archive', 'bInvalidateOlderFiles', IntToStr(1), ExpandConstant('{app}\Fallout_default.ini'));
    SetIniString('Archive', 'bUseArchives', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\Fallout.ini'));
    SetIniString('Archive', 'bUseArchives', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\FalloutPrefs.ini'));
    SetIniString('Archive', 'bUseArchives', IntToStr(1), ExpandConstant('{app}\Fallout_default.ini'));
    //[Pathfinding]
    SetIniString('Pathfinding', 'bBackgroundNavmeshUpdate', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\Fallout.ini'));
    SetIniString('Pathfinding', 'bBackgroundNavmeshUpdate', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\FalloutPrefs.ini'));
    SetIniString('Pathfinding', 'bBackgroundNavmeshUpdate', IntToStr(1), ExpandConstant('{app}\Fallout_default.ini'));
    //[MAIN]
    SetIniString('MAIN', 'bCloneModelsInBackground', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\Fallout.ini'));
    SetIniString('MAIN', 'bCloneModelsInBackground', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\FalloutPrefs.ini'));
    SetIniString('MAIN', 'bCloneModelsInBackground', IntToStr(1), ExpandConstant('{app}\Fallout_default.ini'));
    //[HAVOK]
    SetIniString('HAVOK', 'iNumHavokThreads', IntToStr(5), ExpandConstant('{userdocs}\My games\FalloutNV\Fallout.ini'));
    SetIniString('HAVOK', 'iNumHavokThreads', IntToStr(5), ExpandConstant('{userdocs}\My games\FalloutNV\FalloutPrefs.ini'));
    SetIniString('HAVOK', 'iNumHavokThreads', IntToStr(5), ExpandConstant('{app}\Fallout_default.ini'));
    //[BackgroundLoad]
    SetIniString('BackgroundLoad', 'bBackgroundLoadLipFiles', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\Fallout.ini'));
    SetIniString('BackgroundLoad', 'bBackgroundLoadLipFiles', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\FalloutPrefs.ini'));
    SetIniString('BackgroundLoad', 'bBackgroundLoadLipFiles', IntToStr(1), ExpandConstant('{app}\Fallout_default.ini'));
    SetIniString('BackgroundLoad', 'bLoadBackgroundFaceGen', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\Fallout.ini'));
    SetIniString('BackgroundLoad', 'bLoadBackgroundFaceGen', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\FalloutPrefs.ini'));
    SetIniString('BackgroundLoad', 'bLoadBackgroundFaceGen', IntToStr(1), ExpandConstant('{app}\Fallout_default.ini'));
    SetIniString('BackgroundLoad', 'bBackgroundCellLoads', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\Fallout.ini'));
    SetIniString('BackgroundLoad', 'bBackgroundCellLoads', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\FalloutPrefs.ini'));
    SetIniString('BackgroundLoad', 'bBackgroundCellLoads', IntToStr(1), ExpandConstant('{app}\Fallout_default.ini'));
    SetIniString('BackgroundLoad', 'bLoadHelmetsInBackground', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\Fallout.ini'));
    SetIniString('BackgroundLoad', 'bLoadHelmetsInBackground', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\FalloutPrefs.ini'));
    SetIniString('BackgroundLoad', 'bLoadHelmetsInBackground', IntToStr(1), ExpandConstant('{app}\Fallout_default.ini'));
    SetIniString('BackgroundLoad', 'iBackgroundLoadLoading', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\Fallout.ini'));
    SetIniString('BackgroundLoad', 'iBackgroundLoadLoading', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\FalloutPrefs.ini'));
    SetIniString('BackgroundLoad', 'iBackgroundLoadLoading', IntToStr(1), ExpandConstant('{app}\Fallout_default.ini'));
    SetIniString('BackgroundLoad', 'bBackgroundPathing', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\Fallout.ini'));
    SetIniString('BackgroundLoad', 'bBackgroundPathing', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\FalloutPrefs.ini'));
    SetIniString('BackgroundLoad', 'bBackgroundPathing', IntToStr(1), ExpandConstant('{app}\Fallout_default.ini'));
    SetIniString('BackgroundLoad', 'bUseMultiThreadedFaceGen', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\Fallout.ini'));
    SetIniString('BackgroundLoad', 'bUseMultiThreadedFaceGen', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\FalloutPrefs.ini'));
    SetIniString('BackgroundLoad', 'bUseMultiThreadedFaceGen', IntToStr(1), ExpandConstant('{app}\Fallout_default.ini'));
    SetIniString('BackgroundLoad', 'bUseMultiThreadedTrees', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\Fallout.ini'));
    SetIniString('BackgroundLoad', 'bUseMultiThreadedTrees', IntToStr(1), ExpandConstant('{userdocs}\My games\FalloutNV\FalloutPrefs.ini'));
    SetIniString('BackgroundLoad', 'bUseMultiThreadedTrees', IntToStr(1), ExpandConstant('{app}\Fallout_default.ini'));       *)
    //Переименовывание шейдеров
  (*  begin
    OldName := ExpandConstant('{code:GetDirName}')+'\Data\Shaders\shaderpackage013.sdp'
    NewName := ExpandConstant('{code:GetDirName}')+'\Data\Shaders\old_shaderpackage013.sdp';
    if FileExists(OldName) then RenameFile(OldName, NewName);
    end;

     begin
    OldName := ExpandConstant('{code:GetDirName}')+'\Data\Shaders\shaderpackage019.sdp'
    NewName := ExpandConstant('{code:GetDirName}')+'\Data\Shaders\shaderpackage013.sdp';
    if FileExists(OldName) then RenameFile(OldName, NewName);
    end;                                              *)
    // копирование + isdone
    begin
  if (CurStep = ssPostInstall) then begin
    ErrorCode:= true;
    CancelBtn.Show; // Показываем свою кнопку отмены
    while (true) do begin
      // После извлечения файлов из самого инсталлятора
      // запускаем необходимые процедуры
      // предварительно подправив их проценты
      if not proc_ISDoneRun() then break;
      if not proc_CopyDirData() then break;
      if not proc_RenameFiles() then break;

      ErrorCode:= false;
      break;
    end;
    CancelBtn.Hide;
    if (ErrorCode) then
    //  InstallFailed();
  end;
end;

  end;
  //Удаление мусора из корня игры
  begin
  if CurStep = ssDone then

    DelTree(ExpandConstant('{app}') + '\Components', True, True, True);
    DelTree(ExpandConstant('{app}') + '\Customs', True, True, True);
    DelTree(ExpandConstant('{app}') + '\distr', True, True, True);
    DelTree(ExpandConstant('{app}') + '\install_files', True, True, True);

  end;
end;
//*******************************ПРАВКА INI ПО ЖЕЛЕЗУ + ОПТИМИЗАЦИЯ + ПЕРЕИМЕНОВЫВАНИЕ ШЕЙДЕРОВ*******************************//

//*******************************ОПРЕДЕЛЕНИЕ МЕСТА НА ДИСКЕ*******************************//
procedure GetFreeSpaceCaption(Sender: TObject);
  var
    Path: String;
  begin
    Path := ExtractFileDrive(WizardForm.DirEdit.Text);
    GetSpaceOnDisk(Path, True, FreeMB, TotalMB);
    NeedSpaceLabel.Caption := 'Игра займет на диске: '+ MbOrTb(NeedSize*1000);
    TotalNeedSpaceLabel.Caption := 'Для распаковки требуется: '+ MbOrTb(TotalNeedSize*1000);
    FreeSpaceLabel.Caption := 'Доступно места на диске: '+ MbOrTb(FreeMB*1000);
    WizardForm.NextButton.Enabled:= (FreeMB>TotalNeedSize);
    WizardForm.NextButton.Enabled:= (FreeMB>NeedSize);
  if (FreeMB<TotalNeedSize) then
    FreeSpaceLabel.Font.Color:=clRed else
    FreeSpaceLabel.Font.Color:=12632256;
  if (FreeMB<NeedSize) then
    FreeSpaceLabel.Font.Color:=clRed else
    FreeSpaceLabel.Font.Color:=12632256;
end;

//*******************************ОПРЕДЕЛЕНИЕ МЕСТА НА ДИСКЕ*******************************//

//Все скрипты пихать до этой строчки
// На этапе ssPostInstall, после установки файлов из инсталлятора
// начинаем процессы копирования, извлечения и переименования файлов

procedure CurPageChanged(CurPageID: Integer);
  begin
    //
    //Определение места на диске
    if CurPageID = wpSelectDir then GetFreeSpaceCaption(nil);
    
end;

procedure InitializeWizard();
  var
    OldName: string;
    NewName: String;
    Filename: string;
begin
    //Шрифты
  if not FontExists('{#FontName}') then
    begin
        ExtractTemporaryFile('{#Font}');
        AddFontResource(ExpandConstant('{tmp}\{#Font}'), FR_PRIVATE, 0);
    end;
    WizardForm.Font.Name := '{#FontName}';
    WizardForm.Font.Size := 9
    WizardForm.WelcomeLabel1.Font.Name := '{#FontName}';
    WizardForm.WelcomeLabel1.Font.Size := 13
    WizardForm.WelcomeLabel2.Font.Name := '{#FontName}';
    WizardForm.WelcomeLabel2.Font.Size := 10
    WizardForm.PageNameLabel.Font.Name := '{#FontName}';
    WizardForm.PageNameLabel.Font.Size := 10
    WizardForm.PageDescriptionLabel.Font.Name := '{#FontName}';
    WizardForm.PageDescriptionLabel.Font.Size := 9
    WizardForm.FinishedHeadingLabel.Font.Name := '{#FontName}';
    WizardForm.FinishedHeadingLabel.Font.Size := 13
  //
  //
  //Определение места на диске
  NeedSize := {#NeedSize};
    TotalNeedSize := {#TotalNeedSize};

    WizardForm.DiskSpaceLabel.Hide;

    TotalNeedSpaceLabel := TLabel.Create(WizardForm);
    TotalNeedSpaceLabel.Parent := WizardForm.SelectDirPage;
    TotalNeedSpaceLabel.SetBounds(ScaleX(5), ScaleY(200), ScaleX(209), ScaleY(13));

    FreeSpaceLabel := TLabel.Create(WizardForm);
    FreeSpaceLabel.Parent := WizardForm.SelectDirPage;
    FreeSpaceLabel.SetBounds(ScaleX(5), ScaleY(180), ScaleX(209), ScaleY(13));

    NeedSpaceLabel := TLabel.Create(WizardForm);
    NeedSpaceLabel.Parent := WizardForm.SelectDirPage;
    NeedSpaceLabel.SetBounds(ScaleX(5), ScaleY(220), ScaleX(209), ScaleY(13));

    WizardForm.DirEdit.OnChange := @GetFreeSpaceCaption;
  //
  //Убрать атрибуты перед установкой
    begin
      FileName:= ExpandConstant('{userdocs}')+'\my games\FalloutNV\Fallout.ini';
      if (GetFileAttributes(FileName) and FILE_ATTRIBUTE_READONLY) = FILE_ATTRIBUTE_READONLY then
      SetFileAttributes(FileName, FILE_ATTRIBUTE_NORMAL);
    end;
    begin
      FileName:= ExpandConstant('{userdocs}')+'\my games\FalloutNV\FalloutPrefs.ini';
      if (GetFileAttributes(FileName) and FILE_ATTRIBUTE_READONLY) = FILE_ATTRIBUTE_READONLY then
      SetFileAttributes(FileName, FILE_ATTRIBUTE_NORMAL);
    end;
    begin
      FileName:= ExpandConstant('{code:GetDirName}')+'\Fallout_default.ini';
      if (GetFileAttributes(FileName) and FILE_ATTRIBUTE_READONLY) = FILE_ATTRIBUTE_READONLY then
      SetFileAttributes(FileName, FILE_ATTRIBUTE_NORMAL);
    end;
    //
     begin
    OldName := ExpandConstant('{code:GetDirName}')+''
    NewName := ExpandConstant('{code:GetDirName}')+'';
    if FileExists(OldName) then RenameFile(OldName, NewName);
    end;
     begin
    OldName := ExpandConstant('{code:GetDirName}')+''
    NewName := ExpandConstant('{code:GetDirName}')+'';
    if FileExists(OldName) then RenameFile(OldName, NewName);
    end;
     //Описание компонентов
begin
  WizardForm.TypesCombo.Visible:=False;
  WizardForm.ComponentsList.Height := ScaleY(181) - WizardForm.TypesCombo.Top;
  WizardForm.ComponentsList.Top := WizardForm.TypesCombo.Top;
  WizardForm.ComponentsList.Width := ScaleX(417);

  InfoPanel := TPanel.Create(WizardForm);
  InfoPanel.Parent := WizardForm.SelectComponentsPage;
  InfoPanel.Caption := '';
  InfoPanel.Top := ScaleY(195);
  InfoPanel.Left := ScaleX(0);
  InfoPanel.Width := ScaleX(417);
  InfoPanel.Height := ScaleY(38);
  InfoPanel.BevelInner := bvRaised;
  InfoPanel.BevelOuter := bvLowered;
  InfoCaption := TNewStaticText.Create(WizardForm);
  InfoCaption.Parent := WizardForm.SelectComponentsPage;
  InfoCaption.Caption := ExpandConstant('{cm:ComponentsInfoPanel1}');
  InfoCaption.Left := ScaleX(7);
  InfoCaption.Top := InfoPanel.Top - ScaleY(6);
  InfoCaption.Font.Color := 12632256;

  Info := TNewStaticText.Create(WizardForm);
  Info.Parent := InfoPanel;
  Info.AutoSize := False;
  Info.Left := ScaleX(6);
  Info.Width := ScaleX(403);
  Info.Top := ScaleY(12);
  Info.Height := ScaleY(24);
  Info.Caption := ExpandConstant('{cm:ComponentsInfoPanel2}');
  Info.WordWrap := true;
  Info.Font.Color := 12632256;

    enabledesc(WizardForm.ComponentsList.Handle,Info.Handle,
    ExpandConstant('{cm:ComponentsDescription1};')+
    ExpandConstant('{cm:ComponentsDescription2};')+
    ExpandConstant('{cm:ComponentsDescription3};')+
    ExpandConstant('{cm:ComponentsDescription4};')+
    ExpandConstant('{cm:ComponentsDescription5};')+
    ExpandConstant('{cm:ComponentsDescription6};')+
    ExpandConstant('{cm:ComponentsDescription7};')+
    ExpandConstant('{cm:ComponentsDescription8};')+
    ExpandConstant('{cm:ComponentsDescription9};')+
    ExpandConstant('{cm:ComponentsDescription10};')+
    ExpandConstant('{cm:ComponentsDescription11};')
      );

end;
  //// Создаем все элементы ввода, лейблы и прогрессбары
  InstallState:= SS_DUMMY;
  InstallCancel:= False;
  // Реализуем общий прогресс для всех операций
  // Увы, но тут нужно вручную расставить проценты для общих процессов операций копирования, извлечения..
  pctinit();
  // Процент для файлов, извлекаемых из инсталлятора
  // В данном случаее этот процесс займет 10 %
  setpct(0.1);
  // В общем итоге сумма всех процентов равна 1.00

  //CopyDirEdit:= TEdit.Create(WizardForm);
  //CopyDirBrowse:= TButton.Create(WizardForm);

  with WizardForm do begin
    with TLabel.Create(WizardForm) do begin
      AutoSize:= false;
      SetBounds(DirEdit.Left, DirEdit.Top + 35, DirEdit.Width + 25, 25);
      Transparent:= true;
      WordWrap:= true;
      Caption:=  CustomMessage('ChooseDirInfo');
      Parent:= SelectDirPage;
    end;
    (*CopyDirEdit.SetBounds(DirEdit.Left, DirEdit.Top + 60,
                          DirEdit.Width, DirEdit.Height);
    CopyDirEdit.Text:= '';
    CopyDirEdit.Parent:= SelectDirPage;

    CopyDirBrowse.SetBounds(DirBrowseButton.Left, DirBrowseButton.Top + 60,
                            DirBrowseButton.Width, DirBrowseButton.Height);
    CopyDirBrowse.Parent:= SelectDirPage;
    CopyDirBrowse.Caption:= CustomMessage('btnBrowse');
    CopyDirBrowse.OnClick:= @click_CopyDirBrowse;   *)

    pctPB1:= TNewProgressBar.Create(WizardForm);
    pctPB1.SetBounds( ProgressGauge.Left, Progressgauge.Top,
                      ProgressGauge.Width, progressGauge.Height);
    pctPB1.Position:= 0;
    pctPB1.Max:= 10000;
    pctPB1.Parent:= InstallingPage;

    pctPB2:= TNewProgressBar.Create(WizardForm);
    pctPB2.SetBounds( ProgressGauge.Left, Progressgauge.Top + 50,
                      ProgressGauge.Width, progressGauge.Height);
    pctPB2.Position:= 0;
    pctPB2.Max:= 10000;
    pctPB2.Parent:= InstallingPage;

    pctInfo1:= Tlabel.Create(WizardForm);
    pctInfo1.AutoSize:= false;
    pctInfo1.SetBounds(pctPB1.Left, pctPB1.Top + 25, pctPB1.Width, 20);
    pctInfo1.Transparent:= true;
    pctInfo1.Parent:= InstallingPage;

    pctInfo2:= Tlabel.Create(WizardForm);
    pctInfo2.AutoSize:= false;
    pctInfo2.SetBounds(pctPB2.Left, pctPB2.Top + 25, pctPB2.Width, 20);
    pctInfo2.Transparent:= true;
    pctInfo2.Parent:= InstallingPage;

    CancelBtn:= TButton.Create(WizardForm);
    CancelBtn.SetBounds(CancelButton.Left, CancelButton.Top, CancelButton.Width, CancelButton.Height)
    CancelBtn.Caption:= CustomMessage('btnCancel');
    CancelBtn.OnClick:= @click_CancelBtn;
    Cancelbtn.Parent:= WizardForm;
    CancelBtn.Hide;

    ProgressGauge.SetBounds(0, 0, 0, 0);
    PBOldProc:=SetWindowLong(WizardForm.ProgressGauge.Handle, -4, CallbackAddr('cb_PGUpdate'));
  end;
  // Пытаемся получить путь для копирования из реестра
 // GetCopyEditDir();
end;



procedure DeinitializeSetup();
begin
  UnLoadVCLStyles;   //Выгрузка скина для инсталлятора
  RemoveFontResource(ExpandConstant('{tmp}\{#Font}'), FR_PRIVATE, 0);  //Выгрузка шрифтов
  disabledesc();
  //удаление мусора
  DeleteFile(ExpandConstant('{code:GetDirName}')+'\Data\FalloutNV_lang.esp')
  DeleteFile(ExpandConstant('{code:GetDirName}')+'\Data\DeadMoney_lang.esp')
  DeleteFile(ExpandConstant('{code:GetDirName}')+'\Data\HonestHearts_lang.esp')
  DeleteFile(ExpandConstant('{code:GetDirName}')+'\Data\OldWorldBlues_lang.esp')
  DeleteFile(ExpandConstant('{code:GetDirName}')+'\Data\LonesomeRoad_lang.esp')
  DeleteFile(ExpandConstant('{code:GetDirName}')+'\Data\GunRunnersArsenal_lang.esp')
  DeleteFile(ExpandConstant('{code:GetDirName}')+'\Data\CaravanPack.esm')
  DeleteFile(ExpandConstant('{code:GetDirName}')+'\Data\CaravanPack_lang.esp')
  DeleteFile(ExpandConstant('{code:GetDirName}')+'\Data\ClassicPack.esm')
  DeleteFile(ExpandConstant('{code:GetDirName}')+'\Data\ClassicPack_lang.esp')
  DeleteFile(ExpandConstant('{code:GetDirName}')+'\Data\MercenaryPack.esm')
  DeleteFile(ExpandConstant('{code:GetDirName}')+'\Data\MercenaryPack_lang.esp')
  DeleteFile(ExpandConstant('{code:GetDirName}')+'\Data\TribalPack.esm')
  DeleteFile(ExpandConstant('{code:GetDirName}')+'\Data\TribalPack_lang.esp')
  DeleteFile(ExpandConstant('{code:GetDirName}')+'\Data\CaravanPack - Main.bsa')
  DeleteFile(ExpandConstant('{code:GetDirName}')+'\Data\CaravanPack.nam')
  DeleteFile(ExpandConstant('{code:GetDirName}')+'\Data\ClassicPack - Main.bsa')
  DeleteFile(ExpandConstant('{code:GetDirName}')+'\Data\ClassicPack.nam')
  DeleteFile(ExpandConstant('{code:GetDirName}')+'\Data\FDeadMoneyRus.esp')
  DeleteFile(ExpandConstant('{code:GetDirName}')+'\Data\GunRunnersArsenalRus.esp')
  DeleteFile(ExpandConstant('{code:GetDirName}')+'\Data\HonestHeartsRus.esp')
  DeleteFile(ExpandConstant('{code:GetDirName}')+'\Data\LonesomeRoadRus.esp')
  DeleteFile(ExpandConstant('{code:GetDirName}')+'\Data\MercenaryPack - Main.bsa')
  DeleteFile(ExpandConstant('{code:GetDirName}')+'\Data\MercenaryPack.nam')
  DeleteFile(ExpandConstant('{code:GetDirName}')+'\Data\OldWorldBlues_RUS_MG.esp')
  DeleteFile(ExpandConstant('{code:GetDirName}')+'\Data\PreorderDLCs_lang.esp')
  DeleteFile(ExpandConstant('{code:GetDirName}')+'\Data\TribalPack - Main.bsa')
  DeleteFile(ExpandConstant('{code:GetDirName}')+'\Data\TribalPack.nam')

  begin
  if PBOldProc <> -1 then
    SetWindowLong(WizardForm.ProgressGauge.Handle, -4, PBOldProc);
  end;
end;

procedure DeinitializeUninstall();
begin
  UnLoadVCLStyles_UnInstall;  //Выгрузка скина для деинсталлятора

end;

